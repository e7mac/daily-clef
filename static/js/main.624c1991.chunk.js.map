{"version":3,"sources":["lib/nosleep.js","components/Clip.js","components/ClipDelete.js","components/Tempo.js","components/Relabel.js","components/ClipEdit.js","utils/TimeFormatUtils.js","components/LoginForm.js","components/SignupForm.js","components/LoginContainer.js","components/PlayCalendar.js","components/ClipGroup.js","components/ClipGroupSet.js","services/ModelGetter.js","services/ClipGetter.js","components/MusicLog.js","components/LabelBar.js","components/Settings.js","components/Upload.js","logo.svg","components/Menubar.js","services/APIFileService.js","services/APIService.js","components/UploadPDF.js","components/PDFDisplay.js","components/Recorder.js","components/Player.js","components/Stats.js","lib/unmute.js","App.js","index.js"],"names":["factory","modules","installedModules","__webpack_require__","moduleId","exports","module","i","l","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","_createClass","defineProperties","target","props","length","descriptor","configurable","writable","Constructor","protoProps","staticProps","_require","webm","mp4","oldIOS","navigator","parseFloat","exec","userAgent","replace","window","MSStream","nativeWakeLock","NoSleep","_this","this","instance","TypeError","_classCallCheck","enabled","_wakeLock","handleVisibilityChange","document","visibilityState","enable","addEventListener","noSleepTimer","noSleepVideo","createElement","setAttribute","_addSourceToVideo","duration","currentTime","Math","random","element","type","dataURI","source","src","appendChild","_this2","wakeLock","request","then","console","log","catch","err","error","message","disable","warn","setInterval","hidden","location","href","split","setTimeout","stop","Promise","resolve","play","res","release","clearInterval","pause","Clip","useState","editable","setEditable","editing","setEditing","useEffect","api","demo","getUser","user","id","clip","label","playURL","onPlay","eval","toggleEditing","style","playingItem","background","sm","favorite","icon","faStar","variant","onClick","faPlay","TimeFormatUtils","tempo","date_played","left_avg_velocity","right_avg_velocity","faEdit","clip_id","url","rel","in","className","onRelabel","ClipDelete","deleteClip","state","confirmation","setState","deleted","handleOutsideClick","event","deleteButton","current","contains","removeEventListener","React","createRef","Fragment","ref","faTrash","Component","Tempo","fn","loading","getTempo","result","time","step","data","tempo_curve","timeStep","push","success","packagedData","datum","floor","width","height","margin","top","right","left","bottom","strokeDasharray","dataKey","stroke","dot","unit","disabled","Relabel","relabelItem","labelRef","getInput","relabelTimer","clearTimeout","response","options","loadLabels","labels","oldLabel","placeholder","defaultInputValue","labelKey","Button","ClipEdit","editClip","body","changeSightReading","sight_reading","changeFavorite","changeTechnical","technical","changeNotes","e","notes","notesTimer","changeStage","eventKey","eventObject","learning_stage","stages","Container","Row","Col","ButtonGroup","toggle","ToggleButton","checked","onChange","Dropdown","drop","onSelect","Toggle","Menu","map","item","index","Item","Form","Control","as","formatTime","dateString","Date","toLocaleTimeString","hour","minute","timeZone","formatDateTime","toLocaleDateString","undefined","year","month","day","formatDate","formatDuration","hrs","min","sec","sec_min","LoginForm","username","password","handle_login","preventDefault","reload","handle_change","prevstate","newState","onSubmit","htmlFor","autoCapitalize","SignupForm","handle_signup","fetch","method","headers","JSON","stringify","LoginContainer","signup","setSignup","flex","auto","CardDeck","Card","PlayCalendar","onDayClick","nextDay","getTime","setDate","getDate","startTime","endTime","onTimeChanged","onMonthChange","nextMonth","setMonth","getMonth","loadRawSessionFiles","rawsessionfiles","selectedDays","initialMonth","ClipGroup","open","setOpen","group","clips","forEach","Collapse","ListGroup","ClipGroupSet","set","groups","title","ModelGetter","path","searchParams","itemsPromise","hasMore","items","makeApiCall","apiCall","concat","results","next","URL","pathname","search","ClipGetter","modelGetter","loadItems","sessions","createSessions","clipgroupsets","transform","loadMoreItems","labelClips","clean","now","obj","prop","lastRaw","session","run","isEmptyObject","earliestTime","create_json_format_for_labelclips","a","b","arr","c_array","lastDate","date","prevClipgroupset","combineGroups","newClipgroupset","clipgroupset","MusicLog","getLabelFromPath","match","matchPath","hash","exact","strict","params","loadClipsForLabel","loadAllClips","resetLoadClips","loadClips","clipGetter","loadMoreClips","start_time","end_time","prevProps","prevState","threshold","pageStart","loadMore","loader","Spinner","animation","LabelBar","NavDropdown","openAll","Divider","openLabel","Settings","handleClose","show","handleShow","getSettings","min_length","save","setSettings","faCog","Modal","onHide","Header","closeButton","Title","Body","Group","controlId","Label","Text","Footer","Upload","fileRef","useRef","File","fileInput","files","file","modified","lastModified","setStatus","uploadFileFlow","accept","click","faCloudUploadAlt","Menubar","startTimer","timer","refreshStatus","endTimer","getStatus","task_count","status","conversion_tasks","transcription_tasks","segmentation_tasks","classification_tasks","handle_logout","logged_in","localStorage","getItem","Navbar","bg","expand","to","Brand","logo","alt","aria-controls","Nav","Link","faMicrophone","faChartBar","Alert","faSignOutAlt","faSignInAlt","APIFileService","metadata","piece","getSignedRequest","uploadFileToS3","uploadFile","s3Data","postData","FormData","fields","append","APIService","removeItem","readCsrfToken","nameEQ","ca","cookie","charAt","substring","indexOf","baseUrl","token","userPromise","urlParams","URLSearchParams","demoUser","u","allClips","labelGetter","rawSessionFilesGetter","clipsForLabel","fileService","json","decodeURIComponent","auth","Authorization","fullParams","deepmerge","setItem","UploadPDF","onUploaded","PDFDisplay","uploadedFile","Recorder","handleKeyPress","available","initMidi","recorder","WebMidi","registerMidiDevices","ac","AudioContext","webkitAudioContext","Soundfont","instrument","piano","inputs","input","addListener","recordNoteOn","epochTime","note","number","rawVelocity","shouldPlay","playingNotes","recordNoteOff","playingNote","sustain","sustainedNotes","recordCC","controller","startRecordTimeoutTimer","recordTimer","stopRecord","startRecord","startRecordDurationTimer","recordingDurationTimer","recordDuration","endRecordDurationTimer","refreshTimer","endRecordTimeoutTimer","pitch","velocity","activeNotes","Set","add","noteRecorded","recordEvent","delete","delta","lastTime","fullEvent","channel","sec2ticks","track","noSleep","recording","midiFile","newMidiTrack","tracks","encode","arrayBuffer","blob","Blob","valueOf","filename","toString","secs","metadataButtonClicked","updateMetadata","toFixed","pdf_url","sheet_music_url","can_upload_pdf","labelOptions","includes","noteRange","first","last","playNote","midiNumber","stopNote","DropdownButton","faRedo","Player","midiPlayerAutoplayOnSourceChange","midiPlayerRef","playing","start","getLabel","sound-font","centered","Stats","changeTimeframe","stats","datePrettify","prettyDate","lang","misc","all","last_played","sort","week","ResponsiveContainer","BarChart","barCategoryGap","barSize","CartesianGrid","XAxis","YAxis","tickFormatter","format","Legend","Tooltip","formatter","Bar","fill","unmute","context","pageVisibilityAPI","visibilitychange","webkitHidden","mozHidden","msHidden","tag","ua","toLowerCase","isIOS","isPageActive","isPageVisible","iosIsPageFocused","suspendAudio","audioUnlockingEvents","contextUnlockingEnabled","tagUnlockingEnabled","tagPendingChange","contextStateCheck","tryResuming","toggleContextUnlocking","suspend","context_promiseHandler","resume","_i","audioUnlockingEvents_1","evt","context_unlockingEvent","capture","passive","tagStateCheck","tryChange","paused","toggleTagUnlocking","tag_promiseHandler","audioUnlockingEvents_2","tag_unlockingEvent","pageStateCheck","doc_visChange","win_focusChange","hasFocus","poorManHuffman","tmp","innerHTML","children","controls","disableRemotePlayback","preload","loop","load","onstatechange","App","label_name","displayed_form","scripts_src","script","async","fixed","withRouter","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.624c1991.chunk.js","sourcesContent":["/* eslint no-undef: \"off\"*/\n/*! NoSleep.js v0.12.0 - git.io/vfn01 - Rich Tibbett - MIT license */\n(function webpackUniversalModuleDefinition(root, factory) {\n  if (typeof exports === 'object' && typeof module === 'object')\n    module.exports = factory();\n  else if (typeof define === 'function' && define.amd)\n    define([], factory);\n  else if (typeof exports === 'object')\n    exports[\"NoSleep\"] = factory();\n  else\n    root[\"NoSleep\"] = factory();\n})(this, function () {\n  return /******/ (function (modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif (installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n        /******/\n      }\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n        /******/\n      };\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n      /******/\n    }\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function (exports, name, getter) {\n/******/ \t\tif (!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n        /******/\n      }\n      /******/\n    };\n/******/\n/******/ \t// define __esModule on exports\n/******/ \t__webpack_require__.r = function (exports) {\n/******/ \t\tif (typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n/******/ \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n        /******/\n      }\n/******/ \t\tObject.defineProperty(exports, '__esModule', { value: true });\n      /******/\n    };\n/******/\n/******/ \t// create a fake namespace object\n/******/ \t// mode & 1: value is a module id, require it\n/******/ \t// mode & 2: merge all properties of value into the ns\n/******/ \t// mode & 4: return value when already ns object\n/******/ \t// mode & 8|1: behave like require\n/******/ \t__webpack_require__.t = function (value, mode) {\n/******/ \t\tif (mode & 1) value = __webpack_require__(value);\n/******/ \t\tif (mode & 8) return value;\n/******/ \t\tif ((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n/******/ \t\tvar ns = Object.create(null);\n/******/ \t\t__webpack_require__.r(ns);\n/******/ \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n/******/ \t\tif (mode & 2 && typeof value != 'string') for (var key in value) __webpack_require__.d(ns, key, function (key) { return value[key]; }.bind(null, key));\n/******/ \t\treturn ns;\n      /******/\n    };\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function (module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n      /******/\n    };\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function (object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 0);\n    /******/\n  })\n/************************************************************************/\n/******/([\n/* 0 */\n/***/ (function (module, exports, __webpack_require__) {\n\n\n      var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\n      function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n      var _require = __webpack_require__(1),\n        webm = _require.webm,\n        mp4 = _require.mp4;\n\n      // Detect iOS browsers < version 10\n\n\n      var oldIOS = function oldIOS() {\n        return typeof navigator !== \"undefined\" && parseFloat((\"\" + (/CPU.*OS ([0-9_]{3,4})[0-9_]{0,1}|(CPU like).*AppleWebKit.*Mobile/i.exec(navigator.userAgent) || [0, \"\"])[1]).replace(\"undefined\", \"3_2\").replace(\"_\", \".\").replace(\"_\", \"\")) < 10 && !window.MSStream;\n      };\n\n      // Detect native Wake Lock API support\n      var nativeWakeLock = function nativeWakeLock() {\n        return \"wakeLock\" in navigator;\n      };\n\n      var NoSleep = function () {\n        function NoSleep() {\n          var _this = this;\n\n          _classCallCheck(this, NoSleep);\n\n          this.enabled = false;\n          if (nativeWakeLock()) {\n            this._wakeLock = null;\n            var handleVisibilityChange = function handleVisibilityChange() {\n              if (_this._wakeLock !== null && document.visibilityState === \"visible\") {\n                _this.enable();\n              }\n            };\n            document.addEventListener(\"visibilitychange\", handleVisibilityChange);\n            document.addEventListener(\"fullscreenchange\", handleVisibilityChange);\n          } else if (oldIOS()) {\n            this.noSleepTimer = null;\n          } else {\n            // Set up no sleep video element\n            this.noSleepVideo = document.createElement(\"video\");\n\n            this.noSleepVideo.setAttribute(\"title\", \"No Sleep\");\n            this.noSleepVideo.setAttribute(\"playsinline\", \"\");\n\n            this._addSourceToVideo(this.noSleepVideo, \"webm\", webm);\n            this._addSourceToVideo(this.noSleepVideo, \"mp4\", mp4);\n\n            this.noSleepVideo.addEventListener(\"loadedmetadata\", function () {\n              if (_this.noSleepVideo.duration <= 1) {\n                // webm source\n                _this.noSleepVideo.setAttribute(\"loop\", \"\");\n              } else {\n                // mp4 source\n                _this.noSleepVideo.addEventListener(\"timeupdate\", function () {\n                  if (_this.noSleepVideo.currentTime > 0.5) {\n                    _this.noSleepVideo.currentTime = Math.random();\n                  }\n                });\n              }\n            });\n          }\n        }\n\n        _createClass(NoSleep, [{\n          key: \"_addSourceToVideo\",\n          value: function _addSourceToVideo(element, type, dataURI) {\n            var source = document.createElement(\"source\");\n            source.src = dataURI;\n            source.type = \"video/\" + type;\n            element.appendChild(source);\n          }\n        }, {\n          key: \"enable\",\n          value: function enable() {\n            var _this2 = this;\n\n            if (nativeWakeLock()) {\n              return navigator.wakeLock.request(\"screen\").then(function (wakeLock) {\n                _this2._wakeLock = wakeLock;\n                _this2.enabled = true;\n                console.log(\"Wake Lock active.\");\n                _this2._wakeLock.addEventListener(\"release\", function () {\n                  // ToDo: Potentially emit an event for the page to observe since\n                  // Wake Lock releases happen when page visibility changes.\n                  // (https://web.dev/wakelock/#wake-lock-lifecycle)\n                  console.log(\"Wake Lock released.\");\n                });\n              }).catch(function (err) {\n                _this2.enabled = false;\n                console.error(err.name + \", \" + err.message);\n                throw err;\n              });\n            } else if (oldIOS()) {\n              this.disable();\n              console.warn(\"\\n        NoSleep enabled for older iOS devices. This can interrupt\\n        active or long-running network requests from completing successfully.\\n        See https://github.com/richtr/NoSleep.js/issues/15 for more details.\\n      \");\n              this.noSleepTimer = window.setInterval(function () {\n                if (!document.hidden) {\n                  window.location.href = window.location.href.split(\"#\")[0];\n                  window.setTimeout(window.stop, 0);\n                }\n              }, 15000);\n              this.enabled = true;\n              return Promise.resolve();\n            } else {\n              var playPromise = this.noSleepVideo.play();\n              return playPromise.then(function (res) {\n                _this2.enabled = true;\n                return res;\n              }).catch(function (err) {\n                _this2.enabled = false;\n                throw err;\n              });\n            }\n          }\n        }, {\n          key: \"disable\",\n          value: function disable() {\n            if (nativeWakeLock()) {\n              if (this._wakeLock) {\n                this._wakeLock.release();\n              }\n              this._wakeLock = null;\n            } else if (oldIOS()) {\n              if (this.noSleepTimer) {\n                console.warn(\"\\n          NoSleep now disabled for older iOS devices.\\n        \");\n                window.clearInterval(this.noSleepTimer);\n                this.noSleepTimer = null;\n              }\n            } else {\n              this.noSleepVideo.pause();\n            }\n            this.enabled = false;\n          }\n        }, {\n          key: \"isEnabled\",\n          get: function get() {\n            return this.enabled;\n          }\n        }]);\n\n        return NoSleep;\n      }();\n\n      module.exports = NoSleep;\n\n      /***/\n    }),\n/* 1 */\n/***/ (function (module, exports, __webpack_require__) {\n\n\n\n      module.exports = {\n        webm: \"data:video/webm;base64,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\",\n        mp4: \"data:video/mp4;base64,AAAAHGZ0eXBNNFYgAAACAGlzb21pc28yYXZjMQAAAAhmcmVlAAAGF21kYXTeBAAAbGliZmFhYyAxLjI4AABCAJMgBDIARwAAArEGBf//rdxF6b3m2Ui3lizYINkj7u94MjY0IC0gY29yZSAxNDIgcjIgOTU2YzhkOCAtIEguMjY0L01QRUctNCBBVkMgY29kZWMgLSBDb3B5bGVmdCAyMDAzLTIwMTQgLSBodHRwOi8vd3d3LnZpZGVvbGFuLm9yZy94MjY0Lmh0bWwgLSBvcHRpb25zOiBjYWJhYz0wIHJlZj0zIGRlYmxvY2s9MTowOjAgYW5hbHlzZT0weDE6MHgxMTEgbWU9aGV4IHN1Ym1lPTcgcHN5PTEgcHN5X3JkPTEuMDA6MC4wMCBtaXhlZF9yZWY9MSBtZV9yYW5nZT0xNiBjaHJvbWFfbWU9MSB0cmVsbGlzPTEgOHg4ZGN0PTAgY3FtPTAgZGVhZHpvbmU9MjEsMTEgZmFzdF9wc2tpcD0xIGNocm9tYV9xcF9vZmZzZXQ9LTIgdGhyZWFkcz02IGxvb2thaGVhZF90aHJlYWRzPTEgc2xpY2VkX3RocmVhZHM9MCBucj0wIGRlY2ltYXRlPTEgaW50ZXJsYWNlZD0wIGJsdXJheV9jb21wYXQ9MCBjb25zdHJhaW5lZF9pbnRyYT0wIGJmcmFtZXM9MCB3ZWlnaHRwPTAga2V5aW50PTI1MCBrZXlpbnRfbWluPTI1IHNjZW5lY3V0PTQwIGludHJhX3JlZnJlc2g9MCByY19sb29rYWhlYWQ9NDAgcmM9Y3JmIG1idHJlZT0xIGNyZj0yMy4wIHFjb21wPTAuNjAgcXBtaW49MCBxcG1heD02OSBxcHN0ZXA9NCB2YnZfbWF4cmF0ZT03NjggdmJ2X2J1ZnNpemU9MzAwMCBjcmZfbWF4PTAuMCBuYWxfaHJkPW5vbmUgZmlsbGVyPTAgaXBfcmF0aW89MS40MCBhcT0xOjEuMDAAgAAAAFZliIQL8mKAAKvMnJycnJycnJycnXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXiEASZACGQAjgCEASZACGQAjgAAAAAdBmjgX4GSAIQBJkAIZACOAAAAAB0GaVAX4GSAhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZpgL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGagC/AySEASZACGQAjgAAAAAZBmqAvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZrAL8DJIQBJkAIZACOAAAAABkGa4C/AySEASZACGQAjgCEASZACGQAjgAAAAAZBmwAvwMkhAEmQAhkAI4AAAAAGQZsgL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGbQC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBm2AvwMkhAEmQAhkAI4AAAAAGQZuAL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGboC/AySEASZACGQAjgAAAAAZBm8AvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZvgL8DJIQBJkAIZACOAAAAABkGaAC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBmiAvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZpAL8DJIQBJkAIZACOAAAAABkGaYC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBmoAvwMkhAEmQAhkAI4AAAAAGQZqgL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGawC/AySEASZACGQAjgAAAAAZBmuAvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZsAL8DJIQBJkAIZACOAAAAABkGbIC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBm0AvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZtgL8DJIQBJkAIZACOAAAAABkGbgCvAySEASZACGQAjgCEASZACGQAjgAAAAAZBm6AnwMkhAEmQAhkAI4AhAEmQAhkAI4AhAEmQAhkAI4AhAEmQAhkAI4AAAAhubW9vdgAAAGxtdmhkAAAAAAAAAAAAAAAAAAAD6AAABDcAAQAAAQAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAzB0cmFrAAAAXHRraGQAAAADAAAAAAAAAAAAAAABAAAAAAAAA+kAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAALAAAACQAAAAAAAkZWR0cwAAABxlbHN0AAAAAAAAAAEAAAPpAAAAAAABAAAAAAKobWRpYQAAACBtZGhkAAAAAAAAAAAAAAAAAAB1MAAAdU5VxAAAAAAALWhkbHIAAAAAAAAAAHZpZGUAAAAAAAAAAAAAAABWaWRlb0hhbmRsZXIAAAACU21pbmYAAAAUdm1oZAAAAAEAAAAAAAAAAAAAACRkaW5mAAAAHGRyZWYAAAAAAAAAAQAAAAx1cmwgAAAAAQAAAhNzdGJsAAAAr3N0c2QAAAAAAAAAAQAAAJ9hdmMxAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAALAAkABIAAAASAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGP//AAAALWF2Y0MBQsAN/+EAFWdCwA3ZAsTsBEAAAPpAADqYA8UKkgEABWjLg8sgAAAAHHV1aWRraEDyXyRPxbo5pRvPAyPzAAAAAAAAABhzdHRzAAAAAAAAAAEAAAAeAAAD6QAAABRzdHNzAAAAAAAAAAEAAAABAAAAHHN0c2MAAAAAAAAAAQAAAAEAAAABAAAAAQAAAIxzdHN6AAAAAAAAAAAAAAAeAAADDwAAAAsAAAALAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAAiHN0Y28AAAAAAAAAHgAAAEYAAANnAAADewAAA5gAAAO0AAADxwAAA+MAAAP2AAAEEgAABCUAAARBAAAEXQAABHAAAASMAAAEnwAABLsAAATOAAAE6gAABQYAAAUZAAAFNQAABUgAAAVkAAAFdwAABZMAAAWmAAAFwgAABd4AAAXxAAAGDQAABGh0cmFrAAAAXHRraGQAAAADAAAAAAAAAAAAAAACAAAAAAAABDcAAAAAAAAAAAAAAAEBAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAkZWR0cwAAABxlbHN0AAAAAAAAAAEAAAQkAAADcAABAAAAAAPgbWRpYQAAACBtZGhkAAAAAAAAAAAAAAAAAAC7gAAAykBVxAAAAAAALWhkbHIAAAAAAAAAAHNvdW4AAAAAAAAAAAAAAABTb3VuZEhhbmRsZXIAAAADi21pbmYAAAAQc21oZAAAAAAAAAAAAAAAJGRpbmYAAAAcZHJlZgAAAAAAAAABAAAADHVybCAAAAABAAADT3N0YmwAAABnc3RzZAAAAAAAAAABAAAAV21wNGEAAAAAAAAAAQAAAAAAAAAAAAIAEAAAAAC7gAAAAAAAM2VzZHMAAAAAA4CAgCIAAgAEgICAFEAVBbjYAAu4AAAADcoFgICAAhGQBoCAgAECAAAAIHN0dHMAAAAAAAAAAgAAADIAAAQAAAAAAQAAAkAAAAFUc3RzYwAAAAAAAAAbAAAAAQAAAAEAAAABAAAAAgAAAAIAAAABAAAAAwAAAAEAAAABAAAABAAAAAIAAAABAAAABgAAAAEAAAABAAAABwAAAAIAAAABAAAACAAAAAEAAAABAAAACQAAAAIAAAABAAAACgAAAAEAAAABAAAACwAAAAIAAAABAAAADQAAAAEAAAABAAAADgAAAAIAAAABAAAADwAAAAEAAAABAAAAEAAAAAIAAAABAAAAEQAAAAEAAAABAAAAEgAAAAIAAAABAAAAFAAAAAEAAAABAAAAFQAAAAIAAAABAAAAFgAAAAEAAAABAAAAFwAAAAIAAAABAAAAGAAAAAEAAAABAAAAGQAAAAIAAAABAAAAGgAAAAEAAAABAAAAGwAAAAIAAAABAAAAHQAAAAEAAAABAAAAHgAAAAIAAAABAAAAHwAAAAQAAAABAAAA4HN0c3oAAAAAAAAAAAAAADMAAAAaAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAACMc3RjbwAAAAAAAAAfAAAALAAAA1UAAANyAAADhgAAA6IAAAO+AAAD0QAAA+0AAAQAAAAEHAAABC8AAARLAAAEZwAABHoAAASWAAAEqQAABMUAAATYAAAE9AAABRAAAAUjAAAFPwAABVIAAAVuAAAFgQAABZ0AAAWwAAAFzAAABegAAAX7AAAGFwAAAGJ1ZHRhAAAAWm1ldGEAAAAAAAAAIWhkbHIAAAAAAAAAAG1kaXJhcHBsAAAAAAAAAAAAAAAALWlsc3QAAAAlqXRvbwAAAB1kYXRhAAAAAQAAAABMYXZmNTUuMzMuMTAw\"\n      };\n\n      /***/\n    })\n/******/]);\n});","import { Collapse, Container, Row, Col, Button } from 'react-bootstrap';\nimport { faEdit, faPlay, faStar } from '@fortawesome/free-solid-svg-icons'\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport React, { useState, useEffect } from 'react';\n\nimport * as TimeFormatUtils from '../utils/TimeFormatUtils'\nimport ClipDelete from './ClipDelete';\nimport ClipEdit from './ClipEdit';\nimport Tempo from './Tempo';\n\nexport default function Clip(props) {\n\tconst [editable, setEditable] = useState(false)\n\tconst [editing, setEditing] = useState(false)\n\n\tuseEffect(() => {\n\t\tif (!props.api.demo) {\n\t\t\tprops.api.getUser().then(user => {\n\t\t\t\tif (user !== null) {\n\t\t\t\t\tsetEditable(user.id === props.clip.user)\n\t\t\t\t}\n\t\t\t})\n\t\t}\n\t\tif (props.clip.label === null) {\n\t\t\tsetEditing(true)\n\t\t}\n\t}, [props.api, props.clip.label, props.clip.user])\n\n\tconst playURL = () => {\n\t\tprops.onPlay(props.clip)\n\t\t// eslint-disable-next-line\n\t\teval(\"Tone.start()\")\n\t}\n\n\tconst toggleEditing = () => {\n\t\tsetEditing(!editing)\n\t}\n\n\treturn (\n\t\t<div>\n\t\t\t<Container style={props.playingItem === props.clip ? { background: `#dcedc8` } : {}}>\n\t\t\t\t<Row>\n\t\t\t\t\t<Col sm=\"auto\">\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tprops.clip.favorite\n\t\t\t\t\t\t\t\t? <FontAwesomeIcon icon={faStar} />\n\t\t\t\t\t\t\t\t: \" \"\n\t\t\t\t\t\t}\n\t\t\t\t\t</Col>\n\t\t\t\t\t<Col sm=\"auto\">\n\t\t\t\t\t\t<Button variant=\"dark\" onClick={playURL}><FontAwesomeIcon icon={faPlay} /></Button>\n\t\t\t\t\t</Col>\n\t\t\t\t\t<Col sm=\"auto\">\n\t\t\t\t\t\t{TimeFormatUtils.formatDuration(props.clip.duration)}\n\t\t\t\t\t</Col>\n\t\t\t\t\t<Col sm=\"auto\">\n\t\t\t\t\t\t{props.clip.key}\n\t\t\t\t\t</Col>\n\t\t\t\t\t<Col sm=\"auto\">\n\t\t\t\t\t\t{props.clip.tempo}bpm\n\t\t\t\t\t</Col>\n\t\t\t\t\t<Col sm=\"auto\">\n\t\t\t\t\t\t{TimeFormatUtils.formatTime(props.clip.date_played)}\n\t\t\t\t\t</Col>\n\t\t\t\t\t<Col sm=\"auto\">\n\t\t\t\t\t\tLH:{props.clip.left_avg_velocity}\n\t\t\t\t\t</Col>\n\t\t\t\t\t<Col sm=\"auto\">\n\t\t\t\t\t\tRH:{props.clip.right_avg_velocity}\n\t\t\t\t\t</Col>\n\t\t\t\t\t{editable &&\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t<Col sm=\"auto\">\n\t\t\t\t\t\t\t\t<Button variant=\"light\" onClick={toggleEditing}><FontAwesomeIcon icon={faEdit} /></Button>\n\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t\t<Col sm=\"auto\">\n\t\t\t\t\t\t\t\t<ClipDelete clip={props.clip} api={props.api} />\n\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t</>\n\t\t\t\t\t}\n\t\t\t\t\t<Col sm=\"auto\">\n\t\t\t\t\t\t<Tempo clip_id={props.clip.id} api={props.api} />\n\t\t\t\t\t</Col>\n\t\t\t\t\t<Col sm=\"auto\">\n\t\t\t\t\t\t<a href={`https://e7mac.github.io/MIDIano/?url=${props.clip.url}`} target=\"_blank\" rel=\"noopener noreferrer\"><Button variant=\"link\">Synthesia</Button></a>\n\t\t\t\t\t</Col>\n\t\t\t\t</Row>\n\t\t\t\t<Collapse in={editing}>\n\t\t\t\t\t<Row>\n\t\t\t\t\t\t<Col>\n\t\t\t\t\t\t\t<span className=\"item\"><ClipEdit clip={props.clip} api={props.api} onRelabel={props.onRelabel} /></span>\n\t\t\t\t\t\t</Col>\n\t\t\t\t\t</Row>\n\t\t\t\t</Collapse>\n\t\t\t</Container>\n\t\t</div>);\n}\n","import { Button } from 'react-bootstrap';\nimport { faTrash } from '@fortawesome/free-solid-svg-icons'\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport React from 'react';\n\nimport './ClipDelete.css';\n\nexport default class ClipDelete extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props)\n\t\tthis.state = {\n\t\t\tconfirmation: false,\n\t\t\tdeleted: false\n\t\t}\n\t\tthis.deleteButton = React.createRef();\n\t}\n\n\tdeleteClip = () => {\n\t\tif (this.state.confirmation) {\n\t\t\tthis.props.api.deleteClip(this.props.clip.id).then(() => {\n\t\t\t\tthis.setState({ deleted: true })\n\t\t\t})\n\t\t} else {\n\t\t\tthis.setState({ confirmation: true })\n\t\t\tsetTimeout(() => {\n\t\t\t\tdocument.addEventListener('click', this.handleOutsideClick);\n\t\t\t}, 100)\n\t\t}\n\t}\n\n\thandleOutsideClick = (event) => {\n\t\tif (this.deleteButton.current !== null) {\n\t\t\tif (!this.deleteButton.current.contains(event.target)) {\n\t\t\t\tthis.setState({ confirmation: false })\n\t\t\t\tdocument.removeEventListener('click', this.handleOutsideClick);\n\t\t\t}\n\t\t}\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<React.Fragment>\n\t\t\t\t{\n\t\t\t\t\tthis.state.deleted\n\t\t\t\t\t\t? \"Deleted. Refresh as needed\"\n\t\t\t\t\t\t: this.state.confirmation\n\t\t\t\t\t\t\t? <Button variant=\"danger\" onClick={this.deleteClip} ref={this.deleteButton}>Sure?</Button>\n\t\t\t\t\t\t\t: <Button variant=\"light\" onClick={this.deleteClip} ref={this.deleteButton}><FontAwesomeIcon icon={faTrash} /></Button>\n\t\t\t\t}\n\t\t\t</React.Fragment>\n\t\t);\n\t}\n}","import { Button } from 'react-bootstrap';\nimport { LineChart, Line, XAxis, YAxis, CartesianGrid, Tooltip } from 'recharts';\nimport React from 'react';\n\nimport * as TimeFormatUtils from '../utils/TimeFormatUtils'\n\nexport default class Tempo extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tsuccess: false,\n\t\t\tloading: false,\n\t\t\tclip_id: props.clip_id,\n\t\t\tdata: {\n\t\t\t\tduration: 0,\n\t\t\t\ttempo_curve: [0]\n\t\t\t}\n\t\t}\n\t}\n\n\tfn = () => {\n\t\tthis.setState({ loading: true })\n\t\tthis.props.api.getTempo(this.state.clip_id)\n\t\t\t.then(\n\t\t\t\t(result) => {\n\t\t\t\t\tconst time = []\n\t\t\t\t\tconst step = result.data.duration / result.data.tempo_curve.length\n\t\t\t\t\tfor (const i in result.data.tempo_curve) {\n\t\t\t\t\t\tconst timeStep = step * i\n\t\t\t\t\t\ttime.push(timeStep)\n\t\t\t\t\t}\n\t\t\t\t\tthis.setState({\n\t\t\t\t\t\tsuccess: true,\n\t\t\t\t\t\tloading: false,\n\t\t\t\t\t\tdata: result.data,\n\t\t\t\t\t\ttempo_curve: result.data.tempo_curve,\n\t\t\t\t\t\ttime: time\n\t\t\t\t\t})\n\t\t\t\t})\n\n\t}\n\n\trender() {\n\t\tlet packagedData = []\n\t\tconst step = this.state.data.duration / this.state.data.tempo_curve.length\n\t\tfor (let i = 0; i < this.state.data.tempo_curve.length; i++) {\n\t\t\tconst datum = this.state.data.tempo_curve[i]\n\t\t\tpackagedData.push({\n\t\t\t\ttime: TimeFormatUtils.formatDuration(Math.floor(i * step)),\n\t\t\t\ttempo: Math.floor(datum)\n\t\t\t})\n\t\t}\n\t\treturn (\n\t\t\t<>\n\t\t\t\t{\n\t\t\t\t\tthis.state.success\n\t\t\t\t\t\t? <LineChart\n\t\t\t\t\t\t\twidth={300}\n\t\t\t\t\t\t\theight={300}\n\t\t\t\t\t\t\tdata={packagedData}\n\t\t\t\t\t\t\tmargin={{\n\t\t\t\t\t\t\t\ttop: 5,\n\t\t\t\t\t\t\t\tright: 30,\n\t\t\t\t\t\t\t\tleft: 20,\n\t\t\t\t\t\t\t\tbottom: 5,\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<CartesianGrid strokeDasharray=\"3 3\" />\n\t\t\t\t\t\t\t<XAxis dataKey=\"time\" />\n\t\t\t\t\t\t\t<YAxis />\n\t\t\t\t\t\t\t<Tooltip />\n\t\t\t\t\t\t\t<Line type=\"monotone\" dataKey=\"tempo\" stroke=\"#82ca9d\" dot={false} unit=\"bpm\" />\n\t\t\t\t\t\t</LineChart>\n\t\t\t\t\t\t: <Button variant=\"light\" disabled={this.state.loading} onClick={this.fn}>\n\t\t\t\t\t\t\t{this.state.loading ? 'Loading' : 'Tempo'}\n\t\t\t\t\t\t</Button>\n\t\t\t\t}\n\t\t\t</>);\n\t}\n}\n","import { Button } from 'react-bootstrap';\nimport { Typeahead } from 'react-bootstrap-typeahead';\nimport React from 'react';\n\nexport default class Relabel extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props)\n\t\tthis.state = {\n\t\t\tsuccess: false,\n\t\t\toptions: []\n\t\t}\n\t\tthis.labelRef = React.createRef()\n\t\tthis.relabelTimer = null\n\t}\n\n\trelabelItem = () => {\n\t\tconst label = this.labelRef.current.getInput().value\n\t\tconsole.log(label)\n\t\tif (this.relabelTimer !== null) {\n\t\t\tclearTimeout(this.relabelTimer);\n\t\t}\n\t\t// this.relabelTimer = setTimeout(() => {\n\t\tthis.props.api.relabelItem(this.props.clip.id, label)\n\t\t\t.then((response) => {\n\t\t\t\tthis.setState({ success: true })\n\t\t\t\t// this.props.onRelabel(this.props.clip.id, label)\n\t\t\t})\n\t\t// }, 2000);\n\t}\n\n\tcomponentDidMount() {\n\t\tthis.props.api.loadLabels().then((labels) => {\n\t\t\tthis.setState({ options: labels })\n\t\t})\n\t}\n\n\trender() {\n\t\tconst oldLabel = this.props.clip.label ? this.props.clip.label.name : \"\"\n\t\treturn (\n\t\t\t<span id={`div-relabel-${this.props.clip.id}`}>\n\t\t\t\t{\n\t\t\t\t\tthis.state.success\n\t\t\t\t\t\t? \" Done! Refresh to see results\"\n\t\t\t\t\t\t: <span>\n\t\t\t\t\t\t\t<Typeahead ref={this.labelRef}\n\t\t\t\t\t\t\t\tplaceholder=\"Add Label\"\n\t\t\t\t\t\t\t\tdefaultInputValue={oldLabel}\n\t\t\t\t\t\t\t\tid=\"relabel\"\n\t\t\t\t\t\t\t\tlabelKey=\"name\"\n\t\t\t\t\t\t\t\toptions={this.state.options}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<Button variant=\"light\" onClick={this.relabelItem}>Relabel</Button>\n\t\t\t\t\t\t</span>\n\t\t\t\t}\n\t\t\t</span >\n\t\t);\n\t}\n}","import { Container, Dropdown, Row, Col, Form, ButtonGroup, ToggleButton } from 'react-bootstrap';\nimport React from 'react';\n\nimport Relabel from './Relabel';\n\nimport './ClipEdit.css';\n\nexport default class ClipEdit extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props)\n\t\tthis.state = {\n\t\t\tsight_reading: props.clip.sight_reading,\n\t\t\ttechnical: props.clip.technical,\n\t\t\tfavorite: props.clip.favorite,\n\t\t\tnotes: props.clip.notes\n\t\t}\n\t\tthis.notesTimer = null\n\t\tthis.stages = [\n\t\t\t'Notes',\n\t\t\t'Rhythm',\n\t\t\t'Articulation',\n\t\t\t'Pedaling',\n\t\t\t'Voicing',\n\t\t\t'Dynamics',\n\t\t\t'Rubato',\n\t\t\t'Tempo'\n\t\t]\n\t}\n\n\n\teditClip = (body) => {\n\t\tconsole.log(body)\n\t\tthis.props.api.editClip(this.props.clip.id, body)\n\t}\n\n\tchangeSightReading = () => {\n\t\tthis.editClip({\n\t\t\t'sight_reading': !this.state.sight_reading,\n\t\t})\n\t\tthis.setState({ sight_reading: !this.state.sight_reading })\n\t}\n\n\tchangeFavorite = () => {\n\t\tthis.editClip({\n\t\t\t'favorite': !this.state.favorite,\n\t\t})\n\t\tthis.setState({ favorite: !this.state.favorite })\n\t}\n\n\tchangeTechnical = () => {\n\t\tthis.editClip({\n\t\t\t'technical': !this.state.technical,\n\t\t})\n\t\tthis.setState({ technical: !this.state.technical })\n\t}\n\n\tchangeNotes = (e) => {\n\t\tconst notes = e.target.value\n\t\tthis.setState({\n\t\t\tnotes: notes\n\t\t})\n\t\tif (this.notesTimer !== null) {\n\t\t\tclearTimeout(this.notesTimer);\n\t\t}\n\t\tthis.notesTimer = setTimeout(() => {\n\t\t\tconst notes = this.state.notes\n\t\t\tthis.editClip({\n\t\t\t\t'notes': notes\n\t\t\t})\n\t\t}, 2000);\n\t}\n\n\tchangeStage = (eventKey, eventObject) => {\n\t\tthis.editClip({\n\t\t\tlearning_stage: eventKey\n\t\t})\n\t}\n\n\tonRelabel = () => {\n\t\tthis.props.onRelabel()\n\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<Container className=\"panel-body\">\n\t\t\t\t<Row>\n\t\t\t\t\t<Col sm=\"auto\">\n\t\t\t\t\t\t<ButtonGroup toggle className=\"mb-2\">\n\t\t\t\t\t\t\t<ToggleButton\n\t\t\t\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t\t\t\tvariant=\"light\"\n\t\t\t\t\t\t\t\tchecked={this.state.sight_reading}\n\t\t\t\t\t\t\t\tonChange={this.changeSightReading}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\tSight Reading\n        \t\t\t\t\t</ToggleButton>\n\t\t\t\t\t\t\t<ToggleButton\n\t\t\t\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t\t\t\tvariant=\"light\"\n\t\t\t\t\t\t\t\tchecked={this.state.technical}\n\t\t\t\t\t\t\t\tonChange={this.changeTechnical}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\tTechnical\n        \t\t\t\t\t</ToggleButton>\n\t\t\t\t\t\t\t<ToggleButton\n\t\t\t\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t\t\t\tvariant=\"light\"\n\t\t\t\t\t\t\t\tchecked={this.state.favorite}\n\t\t\t\t\t\t\t\tonChange={this.changeFavorite}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\tFavorite\n        \t\t\t\t\t</ToggleButton>\n\t\t\t\t\t\t</ButtonGroup>\n\t\t\t\t\t</Col>\n\t\t\t\t\t<Col sm=\"auto\">\n\t\t\t\t\t\t<Relabel api={this.props.api} clip={this.props.clip} onRelabel={this.onRelabel} />\n\t\t\t\t\t</Col>\n\t\t\t\t\t<Col sm=\"auto\">\n\t\t\t\t\t\t<Dropdown drop='left' onSelect={this.changeStage}>\n\t\t\t\t\t\t\t<Dropdown.Toggle variant=\"light\" id=\"dropdown-basic\">\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tthis.props.clip.learning_stage !== null\n\t\t\t\t\t\t\t\t\t\t? this.stages[this.props.clip.learning_stage]\n\t\t\t\t\t\t\t\t\t\t: \"pick stage\"\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t</Dropdown.Toggle>\n\t\t\t\t\t\t\t<Dropdown.Menu>\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tthis.stages.map((item, index) =>\n\t\t\t\t\t\t\t\t\t\t<Dropdown.Item eventKey={index}>{item}</Dropdown.Item>\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t</Dropdown.Menu>\n\t\t\t\t\t\t</Dropdown>\n\t\t\t\t\t</Col>\n\t\t\t\t</Row>\n\t\t\t\t<Row>\n\t\t\t\t\t<Form.Control type=\"text\" as=\"textarea\" placeholder=\"Add Notes\" value={this.state.notes} onChange={this.changeNotes} />\n\t\t\t\t</Row>\n\t\t\t</Container >\n\t\t);\n\t}\n}","export const formatDate = (dateString) => {\n\treturn new Date(dateString).toLocaleDateString(undefined, { year: \"numeric\", month: \"long\", day: \"numeric\", timeZone: 'America/Los_Angeles' });\n}\n\nexport const formatTime = (dateString) => {\n\treturn new Date(dateString).toLocaleTimeString([], { hour: '2-digit', minute: '2-digit', timeZone: 'America/Los_Angeles' });\n}\n\nexport const formatDateTime = (dateString) => {\n\treturn formatDate(dateString) + \" - \" + formatTime(dateString)\n}\n\nexport function formatDuration(time) {\n\tvar hrs = Math.floor(time / 60 / 60)\n\ttime = time % (60 * 60);\n\tvar min = Math.floor(time / 60);\n\tvar sec = time % 60;\n\tvar sec_min = (min < 10 ? \"0\" : \"\");\n\tsec_min = (hrs > 0 ? hrs + \":\" : \"\") + sec_min + min + \":\" + (sec < 10 ? \"0\" : \"\");\n\tsec_min = sec_min + sec;\n\treturn sec_min;\n}\n","import React from 'react';\n\nclass LoginForm extends React.Component {\n  state = {\n    username: '',\n    password: ''\n  };\n\n\n  handle_login = (e, data) => {\n    e.preventDefault();\n    this.props.api.handle_login(data)\n      .then(username => {\n        window.location.reload()\n        // this.setState({\n        // logged_in: true,\n        // displayed_form: '',\n        // username: username,\n        // api: new APIService()\n        // });\n      });\n  };\n\n  handle_change = e => {\n    const name = e.target.name;\n    const value = e.target.value;\n    this.setState(prevstate => {\n      const newState = { ...prevstate };\n      newState[name] = value;\n      return newState;\n    });\n  };\n\n  render() {\n    return (\n      <form onSubmit={e => this.handle_login(e, this.state)}>\n        <h4>Log In</h4>\n        <label htmlFor=\"username\">Username </label>\n        <input\n          type=\"text\"\n          name=\"username\"\n          autoCapitalize=\"none\"\n          value={this.state.username}\n          onChange={this.handle_change}\n        />\n        <br /><label htmlFor=\"password\">Password </label>\n        <input\n          type=\"password\"\n          name=\"password\"\n          value={this.state.password}\n          onChange={this.handle_change}\n        />\n        <br /><input type=\"submit\" value=\"Log in\" />\n      </form>\n    );\n  }\n}\n\nexport default LoginForm;\n","import PropTypes from 'prop-types';\nimport React from 'react';\n\nclass SignupForm extends React.Component {\n  state = {\n    username: '',\n    password: ''\n  };\n\n  handle_signup = (e, data) => {\n    e.preventDefault();\n    fetch('https://midi-practice.herokuapp.com/api/users/', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(data)\n    })\n      .then(res => {\n        this.props.api.handle_login(data)\n          .then(username => {\n            window.location.reload()\n            // this.setState({\n            // logged_in: true,\n            // displayed_form: '',\n            // username: username,\n            // api: new APIService()\n            // });\n          });\n      })\n  };\n\n  handle_change = e => {\n    const name = e.target.name;\n    const value = e.target.value;\n    this.setState(prevstate => {\n      const newState = { ...prevstate };\n      newState[name] = value;\n      return newState;\n    });\n  };\n\n  render() {\n    return (\n      <form onSubmit={e => this.handle_signup(e, this.state)}>\n        <h4>Sign Up</h4>\n        <br /><label htmlFor=\"username\">Username</label>\n        <input\n          type=\"text\"\n          name=\"username\"\n          value={this.state.username}\n          onChange={this.handle_change}\n        />\n        <br /><label htmlFor=\"password\">Password</label>\n        <input\n          type=\"password\"\n          name=\"password\"\n          value={this.state.password}\n          onChange={this.handle_change}\n        />\n        <br /><input type=\"submit\" value=\"Sign Up\" />\n      </form>\n    );\n  }\n}\n\nexport default SignupForm;\n\nSignupForm.propTypes = {\n  handle_signup: PropTypes.func.isRequired\n};","import { Button, Card, CardDeck, Container, Row } from 'react-bootstrap';\nimport { React, useState } from 'react';\n\nimport LoginForm from './LoginForm';\nimport SignupForm from './SignupForm';\n\nexport default function LoginContainer(props) {\n\tconst [signup, setSignup] = useState(false);\n\n\tconst toggleSignup = () => {\n\t\tsetSignup(!signup)\n\t}\n\n\treturn (\n\t\t<div>\n\t\t\t<Container flex className=\"value-prop\">\n\t\t\t\t<Row auto>\n\t\t\t\t\t<CardDeck>\n\t\t\t\t\t\t<Card >\n\t\t\t\t\t\t\t<h3>Supercharge your practice sessions</h3>\n\t\t\t\t\t\t\t<h5>\n\t\t\t\t\t\t\t\t<p> Daily Clef helps you get the most out of your practice sessions with automated track logging and intelligent music classification </p>\n\t\t\t\t\t\t\t\t<p> Just hit record </p>\n\t\t\t\t\t\t\t\t<p> Intelligent Recognition </p>\n\t\t\t\t\t\t\t\t<p> Visualized progress </p>\n\t\t\t\t\t\t\t</h5>\n\t\t\t\t\t\t</Card>\n\t\t\t\t\t\t<Card>\n\t\t\t\t\t\t\t<Button variant=\"secondary\" onClick={toggleSignup}>\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tsignup\n\t\t\t\t\t\t\t\t\t\t? \"Login to existing account\"\n\t\t\t\t\t\t\t\t\t\t: \"Create new account\"\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tsignup\n\t\t\t\t\t\t\t\t\t? <SignupForm api={props.api} />\n\t\t\t\t\t\t\t\t\t: <LoginForm api={props.api} />\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t</Card>\n\t\t\t\t\t</CardDeck>\n\t\t\t\t</Row>\n\t\t\t</Container>\n\t\t</div>)\n\t\t;\n}\n","import { Card } from 'react-bootstrap';\nimport DayPicker from 'react-day-picker';\nimport React from 'react';\n\nimport 'react-day-picker/lib/style.css';\n\nexport default class PlayCalendar extends React.Component {\n\n\tconstructor(props) {\n\t\tsuper(props)\n\t\tthis.state = {\n\t\t\tselectedDays: [],\n\t\t\tinitialMonth: new Date()\n\t\t}\n\t}\n\n\tonDayClick = (day) => {\n\t\tconsole.log(day)\n\t\tconst nextDay = new Date(day.getTime())\n\t\tnextDay.setDate(nextDay.getDate() + 1)\n\t\tconst startTime = day.getTime() / 1000\n\t\tconst endTime = nextDay.getTime() / 1000\n\t\tthis.props.onTimeChanged(startTime, endTime)\n\t}\n\n\tonMonthChange = (month) => {\n\t\tconst nextMonth = new Date(month.getTime())\n\t\tnextMonth.setMonth(nextMonth.getMonth() + 1)\n\t\tconst startTime = month.getTime() / 1000\n\t\tconst endTime = nextMonth.getTime() / 1000\n\t\tthis.props.onTimeChanged(startTime, endTime)\n\t\tthis.props.api.loadRawSessionFiles(startTime, endTime)\n\t\t\t.then((rawsessionfiles) => {\n\t\t\t\tconst selectedDays = []\n\t\t\t\tfor (const item of rawsessionfiles) {\n\t\t\t\t\tselectedDays.push(new Date(item['date_played']))\n\t\t\t\t}\n\t\t\t\tthis.setState({\n\t\t\t\t\tselectedDays: selectedDays,\n\t\t\t\t\tinitialMonth: month\n\t\t\t\t})\n\t\t\t})\n\n\t}\n\n\tcomponentDidMount() {\n\t\tthis.props.api.loadRawSessionFiles()\n\t\t\t.then((rawsessionfiles) => {\n\t\t\t\tconst selectedDays = []\n\t\t\t\tfor (const item of rawsessionfiles) {\n\t\t\t\t\tselectedDays.push(new Date(item['date_played']))\n\t\t\t\t}\n\t\t\t\tthis.setState({\n\t\t\t\t\tselectedDays: selectedDays\n\t\t\t\t})\n\t\t\t})\n\t}\n\trender() {\n\t\treturn (\n\t\t\t<Card>\n\t\t\t\t<DayPicker\n\t\t\t\t\tonDayClick={this.onDayClick}\n\t\t\t\t\tselectedDays={this.state.selectedDays}\n\t\t\t\t\tonMonthChange={this.onMonthChange}\n\t\t\t\t\tinitialMonth={this.state.initialMonth}\n\t\t\t\t/>\n\t\t\t</Card>\n\t\t);\n\t}\n}\n","import { Collapse, ListGroup } from 'react-bootstrap';\nimport { React, useState } from 'react';\n\nimport { formatDuration } from '../utils/TimeFormatUtils'\nimport Clip from './Clip';\n\nimport './ClipGroup.css';\n\nexport default function ClipGroup(props) {\n\tconst [open, setOpen] = useState(false);\n\n\tlet duration = 0\n\tprops.group.clips.forEach((clip) => {\n\t\tduration = duration + clip.duration\n\t})\n\n\treturn (\n\t\t<div>\n\t\t\t<div onClick={() => setOpen(!open)} className=\"clip-group-name-label\">\n\t\t\t\t{`${props.group.name} (${formatDuration(duration)})`}\n\t\t\t</div>\n\t\t\t<Collapse in={open}>\n\t\t\t\t<ListGroup>\n\t\t\t\t\t{\n\t\t\t\t\t\tprops.group.clips.map((clip, index) => {\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<ListGroup.Item>\n\t\t\t\t\t\t\t\t\t<Clip api={props.api} key={clip.id} clip={clip} onRelabel={props.onRelabel} onPlay={props.onPlay} playingItem={props.playingItem} />\n\t\t\t\t\t\t\t\t</ListGroup.Item>\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t</ListGroup>\n\t\t\t</Collapse>\n\n\t\t</div>);\n}\n","import React from 'react';\n\nimport * as TimeFormatUtils from '../utils/TimeFormatUtils'\nimport ClipGroup from './ClipGroup';\n\nimport './ClipGroupSet.css';\n\nexport default function ClipGroupSet(props) {\n\n\tlet duration = 0\n\tprops.set.groups.forEach((groups) => {\n\t\tgroups.clips.forEach((clip) => {\n\t\t\tduration = duration + clip.duration\n\t\t})\n\t})\n\n\treturn (\n\t\t<div>\n\t\t\t<h5>{`${props.set.title} (${TimeFormatUtils.formatDuration(duration)})`}</h5>\n\t\t\t{\n\t\t\t\tprops.set.groups.map((group, index) => {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<ClipGroup api={props.api} key={group.name} group={group} onRelabel={props.onRelabel} onPlay={props.onPlay} playingItem={props.playingItem} />\n\t\t\t\t\t)\n\t\t\t\t})\n\t\t\t}\n\t\t</div>\n\t);\n}\n","export default class ModelGetter {\n\tconstructor(api, path, searchParams = {}) {\n\t\tthis.path = path\n\t\tthis.itemsPromise = null\n\t\tthis.hasMore = true\n\t\tthis.items = []\n\t\tthis.api = api\n\t\tthis.searchParams = searchParams\n\t}\n\n\tloadItems() {\n\t\tif (this.path !== null) {\n\t\t\tif (this.itemsPromise === null) {\n\t\t\t\tthis.makeApiCall()\n\t\t\t}\n\t\t}\n\t\treturn this.itemsPromise\n\t}\n\n\tloadMoreItems() {\n\t\tif (this.path !== null && this.hasMore) {\n\t\t\tthis.makeApiCall()\n\t\t}\n\t\treturn this.itemsPromise\n\t}\n\n\tmakeApiCall() {\n\t\tthis.itemsPromise = this.api.apiCall(this.path, {\n\t\t\tmethod: 'GET'\n\t\t}, this.searchParams)\n\t\t\t.then((response) => {\n\t\t\t\tthis.items = this.items.concat(response.results);\n\n\t\t\t\tthis.hasMore = (response.next !== null)\n\t\t\t\tthis.path = null\n\t\t\t\tif (response.next) {\n\t\t\t\t\tconst url = new URL(response.next)\n\t\t\t\t\tthis.path = `${url.pathname}${url.search}`\n\t\t\t\t}\n\t\t\t\treturn this.items\n\t\t\t})\n\t\t\t.catch(error => console.log(\"error: \" + error));\n\t}\n}\n","import * as TimeFormatUtils from '../utils/TimeFormatUtils'\nimport ModelGetter from './ModelGetter'\n\nconst DURATION_BETWEEN_SESSIONS_COMBINE = 6 * 60 * 60;\n\nexport default class ClipGetter {\n\tconstructor(api) {\n\t\tthis.hasMore = true\n\t\tthis.modelGetter = new ModelGetter(api, `/api/midiclips/`)\n\t}\n\n\tloadClips() {\n\t\treturn this.modelGetter.loadItems()\n\t\t\t.then(items => {\n\t\t\t\tconst sessions = this.createSessions(items)\n\t\t\t\tconst clipgroupsets = this.transform(sessions)\n\t\t\t\tthis.hasMore = this.modelGetter.hasMore\n\t\t\t\treturn clipgroupsets\n\t\t\t})\n\t}\n\n\tloadMoreClips() {\n\t\treturn this.modelGetter.loadMoreItems()\n\t\t\t.then(items => {\n\t\t\t\tconst sessions = this.createSessions(items)\n\t\t\t\tconst clipgroupsets = this.transform(sessions)\n\t\t\t\tthis.hasMore = this.modelGetter.hasMore\n\t\t\t\treturn clipgroupsets\n\t\t\t})\n\t}\n\n\tlabel(clip) {\n\t\tif (clip.label === null) {\n\t\t\tif (clip.sight_reading === true) {\n\t\t\t\treturn \"Sight Reading\"\n\t\t\t} else if (clip.technical === true) {\n\t\t\t\treturn \"Technical\"\n\t\t\t} else {\n\t\t\t\treturn \"No Label\"\n\t\t\t}\n\t\t}\n\t\treturn clip.label.name\n\t}\n\n\tcreate_json_format_for_labelclips(labelClips) {\n\t\tlet clean = []\n\t\tfor (const key in labelClips) {\n\t\t\tconst value = labelClips[key]\n\t\t\tconst d = {\n\t\t\t\t\"name\": key,\n\t\t\t\t\"clips\": value\n\t\t\t}\n\t\t\tclean.push(d)\n\t\t}\n\t\treturn clean\n\t}\n\n\tearliestTime(labelClips) {\n\t\tlet time = Date.now()\n\t\tfor (const key in labelClips) {\n\t\t\tconst clips = labelClips[key]\n\t\t\tfor (const clip of clips) {\n\t\t\t\tif (new Date(clip.date_played) < new Date(time)) {\n\t\t\t\t\ttime = clip.date_played\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn time\n\t}\n\n\tisEmptyObject(obj) {\n\t\tfor (var prop in obj) {\n\t\t\tif (Object.prototype.hasOwnProperty.call(obj, prop)) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t\treturn true;\n\t}\n\n\tcreateSessions(results) {\n\t\tconst clips = results\n\t\tlet lastRaw = null\n\t\tlet labelClips = {}\n\t\tlet sessions = []\n\t\tlet session = {}\n\t\tfor (const clip of clips) {\n\t\t\tif (clip.title === null) {\n\t\t\t\tclip.title = \"\"\n\t\t\t}\n\t\t\tif (clip.notes === null) {\n\t\t\t\tclip.notes = \"\"\n\t\t\t}\n\t\t\tif (lastRaw === clip.run.id || this.isEmptyObject(labelClips)) {\n\t\t\t\tlastRaw = clip.run.id\n\t\t\t\tif (!(this.label(clip) in labelClips)) {\n\t\t\t\t\tlabelClips[this.label(clip)] = []\n\t\t\t\t}\n\t\t\t\tlabelClips[this.label(clip)].push(clip)\n\t\t\t} else {\n\t\t\t\tlastRaw = clip.run.id\n\t\t\t\tsession = { \"time\": this.earliestTime(labelClips), \"labels\": this.create_json_format_for_labelclips(labelClips) }\n\t\t\t\tsessions.push(session)\n\t\t\t\tlabelClips = {}\n\t\t\t\tlabelClips[this.label(clip)] = []\n\t\t\t\tlabelClips[this.label(clip)].push(clip)\n\t\t\t}\n\t\t}\n\t\tif (!this.isEmptyObject(labelClips)) {\n\t\t\tsession = { \"time\": this.earliestTime(labelClips), \"labels\": this.create_json_format_for_labelclips(labelClips) }\n\t\t\tsessions.push(session)\n\t\t}\n\t\treturn sessions\n\t}\n\n\tcombineGroups(a, b) {\n\t\tlet c = {}\n\t\tfor (const arr of [a, b]) {\n\t\t\tfor (const item of arr) {\n\t\t\t\tconst label = item.name\n\t\t\t\tif (!c[label]) {\n\t\t\t\t\tc[label] = []\n\t\t\t\t}\n\t\t\t\tc[label] = c[label].concat(item.clips)\n\t\t\t}\n\t\t}\n\t\tlet c_array = []\n\t\tfor (const label in c) {\n\t\t\tc_array.push({\n\t\t\t\tname: label,\n\t\t\t\tclips: c[label]\n\t\t\t})\n\t\t}\n\t\treturn c_array\n\t}\n\n\ttransform(sessions) {\n\t\tlet items = []\n\t\tlet lastDate = new Date(2100, 1, 1, 0, 0, 0, 0)\n\t\tfor (const i in sessions) {\n\t\t\tconst session = sessions[i]\n\t\t\tconst date = new Date(session.time)\n\t\t\tconst dateDiff = (lastDate.getTime() - date.getTime()) / 1000;\n\t\t\tif (dateDiff < DURATION_BETWEEN_SESSIONS_COMBINE) {\n\t\t\t\tconst prevClipgroupset = items[items.length - 1];\n\t\t\t\tconst groups = this.combineGroups(prevClipgroupset.groups, session.labels)\n\t\t\t\tconst newClipgroupset = {\n\t\t\t\t\ttitle: TimeFormatUtils.formatDateTime(session.time),\n\t\t\t\t\tdate: session.time,\n\t\t\t\t\tgroups: groups\n\t\t\t\t}\n\t\t\t\titems[items.length - 1] = newClipgroupset;\n\t\t\t} else {\n\t\t\t\tconst clipgroupset = {\n\t\t\t\t\ttitle: TimeFormatUtils.formatDateTime(session.time),\n\t\t\t\t\tdate: session.time,\n\t\t\t\t\tgroups: session.labels\n\t\t\t\t}\n\t\t\t\titems.push(clipgroupset)\n\t\t\t}\n\t\t\tlastDate = date;\n\t\t}\n\t\treturn items\n\t}\n\n}\n","import { Card, Spinner } from 'react-bootstrap';\nimport { matchPath } from 'react-router-dom'\nimport InfiniteScroll from 'react-infinite-scroller'\nimport React from 'react';\n\nimport PlayCalendar from './PlayCalendar'\nimport ClipGroupSet from './ClipGroupSet';\n\nimport ClipGetter from '../services/ClipGetter';\n\nexport default class MusicLog extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props)\n\t\tconst label = this.getLabelFromPath()\n\t\tthis.state = {\n\t\t\titems: [],\n\t\t\thasMore: true,\n\t\t\tlabel: label\n\t\t}\n\t\tif (label != null) {\n\t\t\tthis.loadClipsForLabel(label)\n\t\t}\n\t}\n\n\tgetLabelFromPath = () => {\n\t\tconst match = matchPath(window.location.hash, {\n\t\t\tpath: \"#/label/:label\",\n\t\t\texact: false,\n\t\t\tstrict: false\n\t\t})\n\t\tlet label = null\n\t\tif (match !== null && match !== undefined) {\n\t\t\tif (match.params.label !== null) {\n\t\t\t\tlabel = match.params.label\n\t\t\t}\n\t\t}\n\t\treturn label\n\t}\n\n\tcomponentDidUpdate(prevProps, prevState) {\n\t\tconst label = this.getLabelFromPath()\n\t\tif (label !== this.state.label) {\n\t\t\tconsole.log('label change')\n\t\t\tthis.setState({\n\t\t\t\titems: [],\n\t\t\t\thasMore: true,\n\t\t\t\tlabel: label\n\t\t\t})\n\t\t\tif (label === null) {\n\t\t\t\tthis.loadAllClips()\n\t\t\t} else {\n\t\t\t\tthis.loadClipsForLabel(label)\n\t\t\t}\n\t\t}\n\t}\n\n\tloadClipsForLabel = (label) => {\n\t\tthis.props.api.loadClipsForLabel(label)\n\t}\n\n\tloadAllClips = (label) => {\n\t\tthis.props.api.resetLoadClips()\n\t}\n\n\tloadClips = () => {\n\t\tthis.props.api.clipGetter.loadMoreClips().then((clipgroupsets) => {\n\t\t\tthis.setState({\n\t\t\t\titems: clipgroupsets,\n\t\t\t\thasMore: this.props.api.clipGetter.hasMore\n\t\t\t})\n\t\t})\n\t}\n\n\tonTimeChanged = (startTime, endTime) => {\n\t\tthis.props.api.clipGetter = new ClipGetter(this.props.api)\n\t\tconst searchParams = {\n\t\t\tstart_time: startTime,\n\t\t\tend_time: endTime,\n\t\t}\n\t\tif (this.state.label) {\n\t\t\tsearchParams.label = this.state.label\n\t\t}\n\t\tthis.props.api.clipGetter.modelGetter.searchParams = searchParams\n\t\tthis.setState({\n\t\t\titems: [],\n\t\t\thasMore: true,\n\t\t})\n\t\t// this.props.api.clipGetter.loadMoreClips().then((clipgroupsets) => {\n\t\t// \tthis.setState({\n\t\t// \t\titems: clipgroupsets,\n\t\t// \t\thasMore: this.props.api.clipGetter.hasMore\n\t\t// \t})\n\t\t// })\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<PlayCalendar api={this.props.api} onTimeChanged={this.onTimeChanged} />\n\t\t\t\t<InfiniteScroll\n\t\t\t\t\tthreshold={0}\n\t\t\t\t\tpageStart={0}\n\t\t\t\t\tloadMore={this.loadClips}\n\t\t\t\t\thasMore={this.state.hasMore}\n\t\t\t\t\tloader={< Card > <Spinner animation=\"border\" variant=\"secondary\" /></Card>}>\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.state.items.map((item, index) =>\n\t\t\t\t\t\t\t<Card>\n\t\t\t\t\t\t\t\t<ClipGroupSet api={this.props.api} key={item.title} set={item} onPlay={this.props.onPlay} onRelabel={this.props.onRelabel} playingItem={this.props.playingItem} />\n\t\t\t\t\t\t\t</Card>\n\t\t\t\t\t\t)\n\t\t\t\t\t}\n\t\t\t\t</InfiniteScroll >\n\t\t\t</>\n\t\t);\n\t}\n\n}","import { NavDropdown } from 'react-bootstrap';\nimport React from 'react';\n\nimport './LabelBar.css';\n\nexport default class LabelBar extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props)\n\t\tthis.state = {\n\t\t\tlabels: []\n\t\t}\n\t}\n\n\tcomponentDidMount() {\n\t\tthis.props.api.loadLabels().then((labels) => {\n\t\t\tthis.setState({\n\t\t\t\tlabels: labels\n\t\t\t})\n\t\t})\n\t}\n\n\topenLabel(e) {\n\t\tconsole.log(e)\n\t\tconst label = e.target.id.split('label-id-')[1]\n\t\twindow.location.hash = `#/label/${label}`\n\t}\n\n\topenAll() {\n\t\twindow.location.hash = '#'\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<NavDropdown title=\"Pieces\" id=\"basic-nav-dropdown\">\n\t\t\t\t<NavDropdown.Item onClick={this.openAll}>All</NavDropdown.Item>\n\t\t\t\t<NavDropdown.Divider />\n\t\t\t\t{\n\t\t\t\t\tthis.state.labels.length > 0\n\t\t\t\t\t\t? this.state.labels.map((label, index) => {\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<NavDropdown.Item onClick={this.openLabel} id={`label-id-${label.name}`} >\n\t\t\t\t\t\t\t\t\t{label.name}\n\t\t\t\t\t\t\t\t</NavDropdown.Item>\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t})\n\t\t\t\t\t\t: <NavDropdown.Item>As you label pieces, they will appear here</NavDropdown.Item>\n\n\t\t\t\t}\n\t\t\t</NavDropdown >\n\t\t);\n\t}\n}\n","import { Button, Modal, Form } from 'react-bootstrap';\nimport React from 'react';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faCog } from '@fortawesome/free-solid-svg-icons'\n\nexport default class Settings extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props)\n\t\tthis.state = {\n\t\t\tshow: false,\n\t\t\tloading: true,\n\t\t\tthreshold: null,\n\t\t\tmin_length: null\n\t\t}\n\t}\n\n\thandleClose = () => this.setState({ show: false });\n\thandleShow = () => {\n\t\tthis.setState({ show: true });\n\t\tthis.props.api.getSettings().then(res => {\n\t\t\tthis.setState({\n\t\t\t\tloading: false,\n\t\t\t\tthreshold: res.threshold,\n\t\t\t\tmin_length: res.min_length\n\t\t\t})\n\t\t\tconsole.log(res)\n\t\t})\n\t}\n\n\tsave = () => {\n\t\tconsole.log(this.state)\n\t\tthis.props.api.setSettings({\n\t\t\tthreshold: this.state.threshold,\n\t\t\tmin_length: this.state.min_length\n\t\t}).then(res => {\n\t\t\tconsole.log(res)\n\t\t\tthis.handleClose()\n\t\t})\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<Button variant=\"secondary\" onClick={this.handleShow}>\n\t\t\t\t\t<FontAwesomeIcon icon={faCog} />\n\t\t\t\t</Button>\n\t\t\t\t<Modal show={this.state.show} onHide={this.handleClose}>\n\t\t\t\t\t<Modal.Header closeButton>\n\t\t\t\t\t\t<Modal.Title>Settings</Modal.Title>\n\t\t\t\t\t</Modal.Header>\n\t\t\t\t\t<Modal.Body>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.state.loading\n\t\t\t\t\t\t\t\t? \"Loading...\"\n\t\t\t\t\t\t\t\t: <>\n\t\t\t\t\t\t\t\t\t<Form.Group controlId=\"threshold\">\n\t\t\t\t\t\t\t\t\t\t<Form.Label>Threshold</Form.Label>\n\t\t\t\t\t\t\t\t\t\t<Form.Control\n\t\t\t\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"Enter threshold\"\n\t\t\t\t\t\t\t\t\t\t\tvalue={this.state.threshold}\n\t\t\t\t\t\t\t\t\t\t\tonChange={e => this.setState({ threshold: e.target.value })}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t<Form.Text className=\"text-muted\">\n\t\t\t\t\t\t\t\t\t\t\tHow many seconds of silence before creating a new clip\n    \t\t\t\t\t\t\t\t\t</Form.Text>\n\t\t\t\t\t\t\t\t\t</Form.Group>\n\t\t\t\t\t\t\t\t\t<Form.Group controlId=\"Min Length\">\n\t\t\t\t\t\t\t\t\t\t<Form.Label>Min Length</Form.Label>\n\t\t\t\t\t\t\t\t\t\t<Form.Control type=\"text\" placeholder=\"Enter minimum length\" value={this.state.min_length}\n\t\t\t\t\t\t\t\t\t\t\tonChange={e => this.setState({ min_length: e.target.value })} />\n\t\t\t\t\t\t\t\t\t\t<Form.Text className=\"text-muted\">\n\t\t\t\t\t\t\t\t\t\t\tHow many seconds of sound that qualifies as a clip\n    \t\t\t\t\t\t\t\t\t</Form.Text>\n\t\t\t\t\t\t\t\t\t</Form.Group>\n\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t}\n\t\t\t\t\t</Modal.Body>\n\t\t\t\t\t<Modal.Footer>\n\t\t\t\t\t\t<Button variant=\"secondary\" onClick={this.handleClose}>\n\t\t\t\t\t\t\tClose\n\t\t\t\t  </Button>\n\t\t\t\t\t\t<Button variant=\"primary\" onClick={this.save}>\n\t\t\t\t\t\t\tSave\n\t\t\t\t  </Button>\n\t\t\t\t\t</Modal.Footer>\n\t\t\t\t</Modal>\n\t\t\t</>\n\t\t)\n\t}\n}","import { Form, Button } from 'react-bootstrap';\nimport React, { useRef } from 'react';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faCloudUploadAlt } from '@fortawesome/free-solid-svg-icons'\n\nexport default function Upload(props) {\n\n\tconst fileRef = useRef(null)\n\n\tconst submitClicked = (e) => {\n\t\tconst fileInput = fileRef.current\n\t\tconst files = fileInput.files;\n\t\tfor (let file of files) {\n\t\t\tconst modified = Math.floor(file.lastModified / 1000);\n\t\t\tprops.setStatus(\"Uploading...\")\n\t\t\tprops.api.uploadFileFlow(file, modified)\n\t\t\t\t.then(() => {\n\t\t\t\t\tfileInput.value = ''\n\t\t\t\t\tprops.setStatus(\" Uploaded\")\n\t\t\t\t})\n\t\t}\n\t}\n\n\tconst upload = (e) => {\n\t\tfileRef.current.click()\n\t}\n\n\treturn (\n\t\t<span>\n\t\t\t<Form hidden={true}>\n\t\t\t\t<Form.Group>\n\t\t\t\t\t<Form.File onChange={submitClicked} ref={fileRef} accept=\"audio/*, video/*\" />\n\t\t\t\t</Form.Group>\n\t\t\t</Form>\n\t\t\t<Button variant=\"outline-success\" onClick={upload}><FontAwesomeIcon icon={faCloudUploadAlt} /></Button>\n\t\t</span>\n\t);\n}\n","export default __webpack_public_path__ + \"static/media/logo.6c50fd24.svg\";","import { Alert, Navbar, Nav } from 'react-bootstrap';\nimport { faChartBar, faMicrophone, faSignInAlt, faSignOutAlt } from '@fortawesome/free-solid-svg-icons'\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { Link } from \"react-router-dom\";\nimport React, { Component } from 'react';\n\nimport LabelBar from './LabelBar'\nimport Settings from './Settings'\nimport Upload from './Upload'\n\nimport logo from '../logo.svg'\n\nexport default class Menubar extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tlogged_in: localStorage.getItem('token') ? true : false,\n\t\t\tusername: '',\n\t\t\tstatus: \"\",\n\t\t};\n\t\tthis.timer = null\n\t}\n\n\tcomponentDidMount() {\n\t\tif (this.state.logged_in && !this.props.api.demo) {\n\t\t\tthis.startTimer()\n\t\t}\n\t}\n\n\tstartTimer = () => {\n\t\tthis.timer = setInterval(this.refreshStatus, 3000);\n\t}\n\n\tendTimer = () => {\n\t\tclearInterval(this.timer);\n\t\tthis.timer = null;\n\t}\n\n\tcomponentWillUnmount() {\n\t\tthis.endTimer()\n\t}\n\n\trefreshStatus = () => {\n\t\tthis.props.api.getStatus().then((response) => {\n\t\t\tconsole.log(response)\n\t\t\tconst task_count = response.response\n\t\t\tconst status =\n\t\t\t\t(task_count.conversion_tasks > 0 ? \" Converting \" : \"\")\n\t\t\t\t+ (task_count.transcription_tasks > 0 ? \" Transcribing \" : \"\")\n\t\t\t\t+ (task_count.segmentation_tasks > 0 ? \" Segmenting \" : \"\")\n\t\t\t\t+ (task_count.classification_tasks > 0 ? \" Classifying \" : \"\")\n\t\t\tif (status.length > 0) {\n\t\t\t\tthis.setState({\n\t\t\t\t\tstatus: status\n\t\t\t\t})\n\t\t\t}\n\t\t})\n\t}\n\n\thandle_logout = () => {\n\t\tthis.endTimer()\n\t\tthis.props.api.handle_logout()\n\t\tthis.setState({ logged_in: false, username: '' });\n\t\twindow.location.reload()\n\t};\n\n\tsetStatus = (status) => {\n\t\tthis.setState({\n\t\t\tstatus: status\n\t\t})\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<Navbar bg=\"dark\" variant=\"dark\" expand=\"sm\" className=\"panel-body\">\n\t\t\t\t<Link to=\"/\"><Navbar.Brand className=\"brand\"><img src={logo} className=\"logo\" alt=\"logo\" />Daily Clef</Navbar.Brand></Link>\n\t\t\t\t<Navbar.Toggle aria-controls=\"basic-navbar-nav\" />\n\t\t\t\t<Navbar.Collapse id=\"basic-navbar-nav\">\n\t\t\t\t\t{this.state.logged_in || this.props.api.demo\n\t\t\t\t\t\t? <React.Fragment>\n\t\t\t\t\t\t\t<Nav className=\"mr-auto\">\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tthis.state.logged_in\n\t\t\t\t\t\t\t\t\t\t? <React.Fragment>\n\t\t\t\t\t\t\t\t\t\t\t<Upload api={this.props.api} setStatus={this.setStatus} />\n\t\t\t\t\t\t\t\t\t\t\t<Nav.Link href=\"#record\"><FontAwesomeIcon icon={faMicrophone} /></Nav.Link>\n\t\t\t\t\t\t\t\t\t\t</React.Fragment>\n\t\t\t\t\t\t\t\t\t\t: \"\"\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t<LabelBar api={this.props.api} loadAllClips={this.loadAllClips} loadClipsForLabel={this.loadClipsForLabel} />\n\t\t\t\t\t\t\t\t<Nav.Link href=\"#stats\"><FontAwesomeIcon icon={faChartBar} /></Nav.Link>\n\t\t\t\t\t\t\t\t<Settings api={this.props.api} />\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tthis.state.status.length > 0\n\t\t\t\t\t\t\t\t\t\t? <Alert key={0} variant='secondary'>\n\t\t\t\t\t\t\t\t\t\t\t{this.state.status}\n\t\t\t\t\t\t\t\t\t\t</Alert>\n\t\t\t\t\t\t\t\t\t\t: <br />\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t</Nav>\n\t\t\t\t\t\t\t<Nav.Link href=\"https://docs.google.com/presentation/d/1O5Cn5bAdaDnauJvbXcvuSl-KqBAbwfuPzD1cqoklacA/edit?usp=sharing\" target=\"_blank\">Help</Nav.Link>\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tthis.state.logged_in\n\t\t\t\t\t\t\t\t\t? <Nav.Link onClick={this.handle_logout}><FontAwesomeIcon icon={faSignOutAlt} /></Nav.Link>\n\t\t\t\t\t\t\t\t\t: <Nav.Link href=\"/\"><FontAwesomeIcon icon={faSignInAlt} /></Nav.Link>\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t</React.Fragment>\n\t\t\t\t\t\t: \"\"\n\t\t\t\t\t}\n\t\t\t\t</Navbar.Collapse>\n\t\t\t</Navbar >\n\t\t);\n\t}\n}\n","export default class APIFileService {\n\tconstructor(api) {\n\t\tthis.api = api\n\t}\n\n\tuploadFileFlow(file, lastModified, metadata, piece) {\n\t\tlet url = null\n\t\treturn this.getSignedRequest(file)\n\t\t\t.then((response) => {\n\t\t\t\turl = response.url\n\t\t\t\treturn this.uploadFileToS3(file, response.data, response.url)\n\t\t\t})\n\t\t\t.then((response) => {\n\t\t\t\tconst body = {\n\t\t\t\t\t\"file-url\": url,\n\t\t\t\t\t\"lastModified\": lastModified,\n\t\t\t\t\t\"metadata\": metadata,\n\t\t\t\t\t\"piece\": piece\n\t\t\t\t}\n\t\t\t\treturn this.uploadFile(body)\n\t\t\t})\n\t\t\t.catch(error => console.log(\"error: \" + error));\n\t}\n\n\tgetSignedRequest(file) {\n\t\treturn this.api.apiCall(`/api/sign_s3/?file_name=${file.name}&file_type=${file.type}`)\n\t}\n\n\tuploadFileToS3(file, s3Data, url) {\n\t\tvar postData = new FormData();\n\t\tfor (const key in s3Data.fields) {\n\t\t\tpostData.append(key, s3Data.fields[key]);\n\t\t}\n\t\tpostData.append('file', file);\n\n\t\treturn fetch(s3Data.url, {\n\t\t\tmethod: 'POST',\n\t\t\tbody: postData\n\t\t})\n\t\t\t.then(\n\t\t\t\t(response) => {\n\t\t\t\t\tconsole.log(\"uploaded to s3!\")\n\t\t\t\t\treturn response\n\t\t\t\t});\n\t}\n\n\tuploadFile(body) {\n\t\treturn this.api.apiCall('/api/upload/', {\n\t\t\tmethod: 'POST',\n\t\t\tbody: JSON.stringify(body),\n\t\t\theaders: {\n\t\t\t\t'Content-Type': 'application/json'\n\t\t\t},\n\t\t})\n\t\t\t.then(\n\t\t\t\t(response) => {\n\t\t\t\t\tconsole.log(\"uploaded!\")\n\t\t\t\t\treturn response\n\t\t\t\t})\n\t\t\t.catch(error => console.log(\"error: \" + error));\n\t}\n}","import deepmerge from 'deepmerge'\n\nimport APIFileService from './APIFileService'\nimport ClipGetter from './ClipGetter'\nimport ModelGetter from './ModelGetter'\n\nexport default class APIService {\n\tconstructor() {\n\t\tthis.baseUrl = \"https://midi-practice.herokuapp.com\"\n\t\t// this.baseUrl = \"http://localhost:8000\"\n\t\tthis.token = localStorage.getItem('token')\n\t\tif (this.token !== null) {\n\t\t\tthis.userPromise = this.apiCall(`/api/current_user/`)\n\t\t\t\t.then(\n\t\t\t\t\t(response) => {\n\t\t\t\t\t\tconsole.log(\"get user\")\n\t\t\t\t\t\tif (response.username.length > 0) {\n\t\t\t\t\t\t\treturn response\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\treturn null\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t.catch(error => console.log(\"error: \" + error));\n\t\t}\n\t\tthis.demo = false\n\t\tconst urlParams = new URLSearchParams(window.location.search);\n\t\tthis.demoUser = urlParams.get('user');\n\t\tconst u = this.demoUser\n\t\tthis.allClips = new ClipGetter(this)\n\t\tthis.labelGetter = new ModelGetter(this, `/api/labels/`)\n\t\tthis.rawSessionFilesGetter = new ModelGetter(this, `/api/rawsessionfiles/`)\n\t\tif (u !== null) {\n\t\t\tthis.demo = true\n\t\t}\n\t\tthis.clipGetter = this.allClips\n\n\t\tthis.clipsForLabel = {}\n\t\tthis.fileService = new APIFileService(this)\n\t}\n\n\tgetUser() {\n\t\tif (this.demo) {\n\t\t\treturn null\n\t\t}\n\t\treturn this.userPromise\n\t}\n\n\tapiCall(path, params = {}, searchParams = {}, json = true) {\n\t\tconst url = new URL(`${this.baseUrl}${path}`)\n\t\tif (this.demoUser) {\n\t\t\turl.searchParams.append('user', this.demoUser)\n\t\t}\n\t\tfor (const key in searchParams) {\n\t\t\tconst value = decodeURIComponent(searchParams[key])\n\t\t\tconsole.log(key, value)\n\t\t\turl.searchParams.append(key, value)\n\t\t}\n\t\tlet auth = {\n\t\t\theaders: {\n\t\t\t\tAuthorization: `JWT ${localStorage.getItem('token')}`,\n\t\t\t\t'Content-Type': 'application/json'\n\t\t\t}\n\t\t}\n\t\tif (this.demo) {\n\t\t\tauth = {}\n\t\t}\n\t\tconst fullParams = deepmerge(params, auth);\n\t\tconst request = fetch(url, fullParams)\n\t\tif (json) {\n\t\t\treturn request\n\t\t\t\t.then(res => {\n\t\t\t\t\treturn res.json()\n\t\t\t\t})\n\t\t\t\t.then(res => {\n\t\t\t\t\tif (res[\"detail\"] !== undefined) {\n\t\t\t\t\t\tconsole.log(`LOGOUT from: ${url}`)\n\t\t\t\t\t\tlocalStorage.removeItem('token');\n\t\t\t\t\t\twindow.location.reload()\n\t\t\t\t\t}\n\t\t\t\t\treturn res\n\t\t\t\t})\n\t\t} else {\n\t\t\treturn request\n\t\t}\n\n\t}\n\n\thandle_login(data) {\n\t\treturn fetch(`${this.baseUrl}/token-auth/`, {\n\t\t\tmethod: 'POST',\n\t\t\theaders: {\n\t\t\t\t'Content-Type': 'application/json'\n\t\t\t},\n\t\t\tbody: JSON.stringify(data)\n\t\t})\n\t\t\t.then(res => res.json())\n\t\t\t.then(json => {\n\t\t\t\tlocalStorage.setItem('token', json.token);\n\t\t\t\tif (json.token !== null) {\n\t\t\t\t\treturn json.user.username\n\t\t\t\t}\n\t\t\t\treturn false\n\t\t\t});\n\t}\n\n\thandle_logout = () => {\n\t\tlocalStorage.removeItem('token');\n\t};\n\n\tgetStatus() {\n\t\treturn this.apiCall(`/api/status/`)\n\t\t\t.catch(error => console.log(\"error: \" + error));\n\t}\n\n\tloadLabels() {\n\t\treturn this.labelGetter.loadItems()\n\t}\n\n\tresetLoadClips() {\n\t\tthis.clipGetter = this.allClips\n\t}\n\n\tloadClipsForLabel(label) {\n\t\tif (!(label in this.clipsForLabel)) {\n\t\t\tthis.clipsForLabel[label] = new ClipGetter(this)\n\t\t\tthis.clipsForLabel[label].modelGetter.searchParams = { label: label }\n\t\t}\n\t\tthis.clipGetter = this.clipsForLabel[label]\n\t}\n\n\tloadRawSessionFiles(startTime, endTime) {\n\t\tthis.rawSessionFilesGetter = new ModelGetter(this, `/api/rawsessionfiles/`)\n\t\tif (startTime && endTime) {\n\t\t\tthis.rawSessionFilesGetter.searchParams = {\n\t\t\t\tstart_time: startTime,\n\t\t\t\tend_time: endTime\n\t\t\t}\n\t\t}\n\t\treturn this.rawSessionFilesGetter.loadItems()\n\t}\n\n\tuploadFileFlow(file, lastModified, metadata, piece) {\n\t\treturn this.fileService.uploadFileFlow(file, lastModified, metadata, piece)\n\t}\n\n\treadCsrfToken = () => {\n\t\tvar name = \"csrftoken\"\n\t\tvar nameEQ = name + \"=\";\n\t\tvar ca = document.cookie.split(';');\n\t\tfor (var i = 0; i < ca.length; i++) {\n\t\t\tvar c = ca[i];\n\t\t\twhile (c.charAt(0) === ' ') c = c.substring(1, c.length);\n\t\t\tif (c.indexOf(nameEQ) === 0) return c.substring(nameEQ.length, c.length);\n\t\t}\n\t\treturn null;\n\t}\n\n\tstats() {\n\t\treturn this.apiCall(`/api/stats/`)\n\t\t\t.then(response => {\n\t\t\t\treturn response\n\t\t\t})\n\t\t\t.catch(error => console.log(\"error: \" + error));\n\t}\n\n\teditClip(id, body) {\n\t\treturn this.apiCall(`/api/midiclips/${id}/`, {\n\t\t\tmethod: 'PATCH',\n\t\t\theaders: {\n\t\t\t\t'Content-Type': 'application/json',\n\t\t\t\t'X-CSRFToken': this.readCsrfToken()\n\t\t\t},\n\t\t\tbody: JSON.stringify(body)\n\t\t})\n\t\t\t.then(response => {\n\t\t\t\tconsole.log(response)\n\t\t\t})\n\t\t\t.catch(error => console.log(\"error: \" + error));\n\t}\n\n\tdeleteClip(id,) {\n\t\treturn this.apiCall(`/api/midiclips/${id}/`, {\n\t\t\tmethod: 'DELETE',\n\t\t\theaders: {\n\t\t\t\t'Content-Type': 'application/json',\n\t\t\t\t'X-CSRFToken': this.readCsrfToken()\n\t\t\t}\n\t\t}, {}, false)\n\t\t\t.then(response => {\n\t\t\t\tconsole.log(response)\n\t\t\t})\n\t\t\t.catch(error => console.log(\"error: \" + error));\n\t}\n\n\trelabelItem(id, label) {\n\t\tconst url = `/api/label_item/${id}/${label}/`\n\t\treturn this.apiCall(url).catch(error => console.log(\"error: \" + error));\n\t}\n\n\tgetSettings() {\n\t\tconst url = `/api/settings/`\n\t\treturn this.apiCall(url).catch(error => console.log(\"error: \" + error));\n\t}\n\n\tsetSettings(body) {\n\t\tconst url = `/api/settings/`\n\t\treturn this.apiCall(url, {\n\t\t\tmethod: 'PUT',\n\t\t\tbody: JSON.stringify(body)\n\t\t}).catch(error => console.log(\"error: \" + error));\n\t}\n\n\tgetTempo(clip_id) {\n\t\treturn this.apiCall(`/api/tempo/${clip_id}`).catch(error => console.log(\"error: \" + error));\n\t}\n}\n","import { Form, Button } from 'react-bootstrap';\nimport React, { useRef } from 'react';\n\nexport default function UploadPDF(props) {\n\n\tconst fileRef = useRef(null)\n\n\tconst submitClicked = (e) => {\n\t\tconst fileInput = fileRef.current\n\t\tconst files = fileInput.files;\n\t\tfor (let file of files) {\n\t\t\tconst modified = Math.floor(file.lastModified / 1000);\n\t\t\t// props.setStatus(\"Uploading...\")\n\t\t\tprops.api.uploadFileFlow(file, modified, {}, props.piece)\n\t\t\t\t.then((res) => {\n\t\t\t\t\tconsole.log(res)\n\t\t\t\t\tprops.onUploaded(res.url)\n\t\t\t\t\tfileInput.value = ''\n\t\t\t\t})\n\t\t}\n\t}\n\n\tconst upload = (e) => {\n\t\tfileRef.current.click()\n\t}\n\n\treturn (\n\t\t<span>\n\t\t\t<Form hidden={true}>\n\t\t\t\t<Form.Group>\n\t\t\t\t\t<Form.File onChange={submitClicked} ref={fileRef} accept=\"application/pdf\" />\n\t\t\t\t</Form.Group>\n\t\t\t</Form>\n\t\t\t<Button variant=\"light\" onClick={upload}>{props.title || \"Upload PDF\"}</Button>\n\t\t</span>\n\t);\n}\n","import React from 'react';\n\nimport UploadPDF from './UploadPDF';\n\nexport default class PDFDisplay extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props)\n\t\tthis.state = {\n\t\t\tuploadedFile: null\n\t\t}\n\t}\n\n\tonUploaded = (url) => {\n\t\tthis.setState({\n\t\t\tuploadedFile: url\n\t\t})\n\t}\n\n\trender() {\n\t\tconst file = this.state.uploadedFile || this.props.file\n\t\treturn (\n\t\t\t<>\n\t\t\t\t{\n\t\t\t\t\tfile\n\t\t\t\t\t\t? <iframe title=\"Sheet music\" src={`https://docs.google.com/viewerng/viewer?embedded=true&url=${file}`} width=\"100%\" height=\"900px\" />\n\t\t\t\t\t\t: \"\"\n\t\t\t\t}\n\t\t\t\t<p>\n\t\t\t\t\t<UploadPDF onUploaded={this.onUploaded} title=\"Replace PDF\" api={this.props.api} piece={this.props.piece} />\n\t\t\t\t</p>\n\t\t\t</>\n\t\t);\n\t}\n}","import { Alert, Card, Button, ButtonGroup, DropdownButton, Dropdown, ToggleButton } from 'react-bootstrap';\nimport { encode } from 'json-midi-encoder';\nimport { faRedo } from '@fortawesome/free-solid-svg-icons'\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { Piano } from 'react-piano';\nimport React from 'react';\nimport Soundfont from 'soundfont-player';\nimport WebMidi from 'webmidi';\n\nimport 'react-piano/dist/styles.css';\n\nimport { formatDuration } from '../utils/TimeFormatUtils'\nimport NoSleep from '../lib/nosleep'\nimport PDFDisplay from './PDFDisplay';\n\nimport './Recorder.css';\n\nexport default class Recorder extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tavailable: false,\n\t\t\trecording: false,\n\t\t\tvelocity: 0,\n\t\t\tactiveNotes: new Set(),\n\t\t\tstartTime: null,\n\t\t\tnoteRecorded: false,\n\t\t\tshouldPlay: false,\n\t\t\tmessage: null,\n\t\t\trecordDuration: null,\n\t\t\tnoSleep: new NoSleep(),\n\t\t\tplayingNotes: {},\n\t\t\tsustain: false,\n\t\t\tsustainedNotes: [],\n\t\t\tmetadata: [],\n\t\t\tlabels: [],\n\t\t\tpdf_url: null,\n\t\t\tcan_upload_pdf: null\n\t\t}\n\n\t\tthis.track = null\n\t\tthis.recordTimer = null\n\t\tthis.recordingDurationTimer = null\n\t\tthis.labelOptions = ['None', 'Sight Reading', 'Technical']\n\t}\n\n\tcomponentDidMount() {\n\t\tdocument.addEventListener(\"keydown\", this.handleKeyPress, false);\n\t\tthis.initMidi()\n\t\tthis.props.api.loadLabels().then((labels) => {\n\t\t\tthis.setState({\n\t\t\t\tlabels: labels\n\t\t\t})\n\t\t})\n\t}\n\n\thandleKeyPress = (event) => {\n\t\tconsole.log(event);\n\t\tif (event.key === 'f') {\n\t\t\tthis.setState({\n\t\t\t\tavailable: true\n\t\t\t})\n\t\t}\n\t}\n\n\tcomponentWillUnmount() {\n\t\tdocument.removeEventListener(\"keydown\", this.handleKeyPress, false);\n\t}\n\n\tinitMidi = () => {\n\t\tconst recorder = this;\n\t\tWebMidi.enable(function (err) {\n\t\t\tif (err) {\n\t\t\t\tconsole.log(\"WebMidi could not be enabled.\", err);\n\t\t\t} else {\n\t\t\t\tconsole.log(\"WebMidi enabled!\");\n\t\t\t\trecorder.registerMidiDevices()\n\t\t\t}\n\t\t})\n\t}\n\n\tregisterMidiDevices = () => {\n\t\tconst recorder = this;\n\t\tvar AudioContext = window.AudioContext // Default\n\t\t\t|| window.webkitAudioContext;// Safari and old versions of Chrome\n\n\t\tconst ac = new AudioContext();\n\t\tSoundfont.instrument(ac, 'acoustic_grand_piano').then(function (piano) {\n\t\t\tfor (const i in WebMidi.inputs) {\n\t\t\t\trecorder.setState({\n\t\t\t\t\tavailable: true\n\t\t\t\t})\n\t\t\t\tconst input = WebMidi.inputs[i]\n\n\t\t\t\tinput.addListener('noteon', \"all\", function (e) {\n\t\t\t\t\trecorder.recordNoteOn(recorder.epochTime(), e.note.number, e.rawVelocity)\n\t\t\t\t\tif (recorder.state.shouldPlay) {\n\t\t\t\t\t\tlet playingNotes = recorder.state.playingNotes;\n\t\t\t\t\t\tplayingNotes[e.note.number] = piano.play(e.note.number)\n\t\t\t\t\t\trecorder.setState({\n\t\t\t\t\t\t\tplayingNotes: playingNotes\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tinput.addListener('noteoff', \"all\", function (e) {\n\t\t\t\t\trecorder.recordNoteOff(recorder.epochTime(), e.note.number)\n\t\t\t\t\tif (recorder.state.shouldPlay) {\n\t\t\t\t\t\tlet playingNotes = recorder.state.playingNotes;\n\t\t\t\t\t\tconst playingNote = playingNotes[e.note.number]\n\t\t\t\t\t\tif (recorder.state.sustain) {\n\t\t\t\t\t\t\tlet sustainedNotes = recorder.state.sustainedNotes\n\t\t\t\t\t\t\tsustainedNotes.push(playingNote)\n\t\t\t\t\t\t\trecorder.setState({\n\t\t\t\t\t\t\t\tsustainedNotes: sustainedNotes\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tplayingNote.stop(ac.currentTime)\n\t\t\t\t\t\t}\n\t\t\t\t\t\tdelete playingNotes[e.note.number]\n\t\t\t\t\t\trecorder.setState({\n\t\t\t\t\t\t\tplayingNotes: playingNotes\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tinput.addListener('controlchange', \"all\", function (e) {\n\t\t\t\t\trecorder.recordCC(recorder.epochTime(), e.controller.number, e.value)\n\t\t\t\t\tif (e.controller.number === 64) {\n\t\t\t\t\t\tconst sustain = e.value > 64\n\t\t\t\t\t\trecorder.setState({\n\t\t\t\t\t\t\tsustain: sustain\n\t\t\t\t\t\t})\n\t\t\t\t\t\tif (!sustain) {\n\t\t\t\t\t\t\tfor (const note of recorder.state.sustainedNotes) {\n\t\t\t\t\t\t\t\tnote.stop(ac.currentTime)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\trecorder.setState({\n\t\t\t\t\t\t\t\tsustainedNotes: []\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t})\n\t}\n\tstartRecordTimeoutTimer = () => {\n\t\tthis.recordTimer = setTimeout(() => {\n\t\t\tconsole.log(\"timer hit!\")\n\t\t\tthis.stopRecord()\n\t\t\tthis.startRecord()\n\t\t}, 15 * 60 * 1000); // 15 minutes\n\t}\n\n\tstartRecordDurationTimer = () => {\n\t\tthis.recordingDurationTimer = setInterval(() => {\n\t\t\tconst recordDuration = formatDuration(Math.floor(this.epochTime() - this.state.startTime))\n\t\t\tthis.setState({\n\t\t\t\tmessage: `Recording ${recordDuration}`,\n\t\t\t\trecordDuration: recordDuration\n\t\t\t})\n\t\t}, 1000);\n\t}\n\n\tendRecordDurationTimer = () => {\n\t\tif (this.recordingDurationTimer !== null) {\n\t\t\tclearTimeout(this.recordingDurationTimer);\n\t\t\tthis.recordingDurationTimer = null;\n\t\t}\n\t}\n\n\trefreshTimer = () => {\n\t\tthis.endRecordTimeoutTimer()\n\t\tthis.startRecordTimeoutTimer()\n\t}\n\n\tendRecordTimeoutTimer = () => {\n\t\tif (this.recordTimer !== null) {\n\t\t\tclearTimeout(this.recordTimer);\n\t\t\tthis.recordTimer = null;\n\t\t}\n\t}\n\n\trecordNoteOn = (time, pitch, velocity) => {\n\t\tconst event = {\n\t\t\t\"noteOn\": {\n\t\t\t\t\"noteNumber\": pitch,\n\t\t\t\t\"velocity\": velocity\n\t\t\t}\n\t\t}\n\t\tconst activeNotes = new Set(this.state.activeNotes)\n\t\tactiveNotes.add(pitch)\n\t\tthis.setState({\n\t\t\tvelocity: velocity,\n\t\t\tactiveNotes: activeNotes,\n\t\t\tnoteRecorded: true\n\t\t})\n\t\tthis.recordEvent(time, event)\n\t}\n\n\trecordNoteOff = (time, pitch) => {\n\t\tconst event = {\n\t\t\t\"noteOff\": {\n\t\t\t\t\"noteNumber\": pitch\n\t\t\t}\n\t\t}\n\t\tconst activeNotes = new Set(this.state.activeNotes)\n\t\tactiveNotes.delete(pitch)\n\t\tthis.setState({\n\t\t\tvelocity: 0,\n\t\t\tactiveNotes: activeNotes\n\t\t})\n\t\tthis.recordEvent(time, event)\n\t}\n\n\trecordCC = (time, number, value) => {\n\t\tconst event = {\n\t\t\t\"controlChange\": {\n\t\t\t\t\"type\": number,\n\t\t\t\t\"value\": value\n\t\t\t}\n\t\t}\n\t\tthis.recordEvent(time, event)\n\t}\n\n\trecordEvent = (time, event) => {\n\t\tthis.refreshTimer()\n\t\tconst delta = time - this.lastTime\n\t\tthis.lastTime = time\n\t\tconst fullEvent = {\n\t\t\tchannel: 0,\n\t\t\tdelta: this.sec2ticks(delta),\n\t\t\t...event\n\t\t}\n\t\tif (this.track !== null) {\n\t\t\tthis.track.push(fullEvent)\n\t\t}\n\t}\n\n\tstartRecord = () => {\n\t\tthis.state.noSleep.enable()\n\t\tthis.lastTime = this.epochTime()\n\t\tthis.track = [\n\t\t\t{\n\t\t\t\t\"delta\": 0,\n\t\t\t\t\"trackName\": \"scale\"\n\t\t\t},\n\t\t];\n\t\tthis.setState({\n\t\t\trecording: true,\n\t\t\tnoteRecorded: false,\n\t\t\tstartTime: this.epochTime(),\n\t\t\tmetadata: [{\n\t\t\t\ttime: 0,\n\t\t\t\tvalue: \"None\"\n\t\t\t}]\n\t\t})\n\t\tthis.startRecordTimeoutTimer()\n\t\tthis.startRecordDurationTimer()\n\t}\n\n\n\tstopRecord = () => {\n\t\tthis.endRecordDurationTimer()\n\t\tthis.endRecordTimeoutTimer()\n\t\tconst message = `Uploading recording of duration ${this.state.recordDuration}...`\n\t\tthis.setState({\n\t\t\trecording: false,\n\t\t\tmessage: message\n\t\t})\n\n\t\tthis.track.push({\n\t\t\t\"delta\": 0,\n\t\t\t\"endOfTrack\": true\n\t\t})\n\t\tthis.state.noSleep.disable()\n\t\tif (this.state.noteRecorded === true) {\n\t\t\tlet midiFile = this.newMidiTrack()\n\t\t\tmidiFile.tracks.push(this.track)\n\n\t\t\tconsole.log(midiFile)\n\n\t\t\tencode(midiFile)\n\t\t\t\t.then((arrayBuffer) => {\n\t\t\t\t\tvar blob = new Blob([arrayBuffer], {\n\t\t\t\t\t\ttype: 'audio/midi'\n\t\t\t\t\t});\n\t\t\t\t\t// used for testing by downloading URI from console\n\t\t\t\t\t// var a = new FileReader();\n\t\t\t\t\t// a.onload = function(e) {\n\t\t\t\t\t// \tconsole.log(e.target.result);\n\t\t\t\t\t// }\n\t\t\t\t\t// a.readAsDataURL(blob);\n\t\t\t\t\t// ---end\n\t\t\t\t\tconst lastModified = Math.floor(new Date().valueOf() / 1000)\n\t\t\t\t\tconst filename = `${lastModified.toString()}.mid`\n\t\t\t\t\tconst file = new File([blob], filename)\n\t\t\t\t\tthis.props.api.uploadFileFlow(file, lastModified, this.state.metadata, \"\").then(() => {\n\t\t\t\t\t\tconsole.log(\"recorded file uploaded!\")\n\t\t\t\t\t\tthis.setState({\n\t\t\t\t\t\t\tmessage: \" Recording Uploaded!\"\n\t\t\t\t\t\t})\n\t\t\t\t\t})\n\t\t\t\t})\n\t\t}\n\n\t\tthis.track = null;\n\t}\n\n\tepochTime = () => {\n\t\treturn new Date().valueOf() / 1000\n\t}\n\n\tsec2ticks = (secs) => {\n\t\treturn secs * 8 * 240 * 2 / 4 // 120 bpm\n\t}\n\n\tmetadataButtonClicked = (e) => {\n\t\tthis.updateMetadata(e.target.value)\n\t}\n\tupdateMetadata = (value) => {\n\t\tconst metadata = this.state.metadata\n\t\tmetadata.push({\n\t\t\ttime: (this.epochTime() - this.state.startTime).toFixed(2),\n\t\t\tvalue: value\n\t\t})\n\t\tconsole.log(metadata)\n\t\tthis.setState({ metadata: metadata })\n\t\tlet pdf_url = null\n\t\tfor (const label of this.state.labels) {\n\t\t\tif (label.name === value) {\n\t\t\t\tpdf_url = label.sheet_music_url\n\t\t\t}\n\t\t}\n\t\tconsole.log(pdf_url)\n\t\tthis.setState({\n\t\t\tpdf_url: pdf_url,\n\t\t\tcan_upload_pdf: !this.labelOptions.includes(value)\n\t\t})\n\t}\n\n\trender() {\n\t\tconst activeNotes = [...this.state.activeNotes]\n\t\treturn (\n\t\t\t<span className=\"recorder\">\n\t\t\t\t<Card>\n\n\t\t\t\t\t{this.state.message !== null\n\t\t\t\t\t\t? <Alert key='0' variant='info'>\n\t\t\t\t\t\t\t<h5>{this.state.message}</h5>\n\t\t\t\t\t\t</Alert>\n\t\t\t\t\t\t: \"\"\n\t\t\t\t\t}\n\t\t\t\t\t{this.state.available\n\t\t\t\t\t\t? <p>{this.state.recording\n\t\t\t\t\t\t\t? <span>\n\t\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t\t<Button variant=\"danger\" onClick={this.stopRecord}>\n\t\t\t\t\t\t\t\t\t\tStop\n\t\t\t\t\t\t\t\t\t\t{/* Stop (vol: {this.state.velocity}) */}\n\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t<p className=\"recorder-card\">\n\t\t\t\t\t\t\t\t\t<Piano\n\t\t\t\t\t\t\t\t\t\tactiveNotes={activeNotes}\n\t\t\t\t\t\t\t\t\t\tnoteRange={{ first: 45, last: 88 }}\n\t\t\t\t\t\t\t\t\t\tplayNote={(midiNumber) => {\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\tstopNote={(midiNumber) => {\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t\t<ButtonGroup toggle className=\"mb-2\">\n\t\t\t\t\t\t\t\t\t\t<ToggleButton\n\t\t\t\t\t\t\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t\t\t\t\t\t\tvariant=\"secondary\"\n\t\t\t\t\t\t\t\t\t\t\tchecked={this.state.shouldPlay}\n\t\t\t\t\t\t\t\t\t\t\tonChange={() => { this.setState({ shouldPlay: !this.state.shouldPlay }) }}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\tPlay Sound\n        \t\t\t\t\t\t\t\t</ToggleButton>\n\t\t\t\t\t\t\t\t\t</ButtonGroup>\n\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t\tAdd Label:\n\t\t\t\t\t\t\t\t\t<br />\n\t\t\t\t\t\t\t\t\t<ButtonGroup toggle={true}>\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\tthis.labelOptions.map((item, index) =>\n\t\t\t\t\t\t\t\t\t\t\t\t<Button value={item} onClick={this.metadataButtonClicked}>{item}</Button>\n\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t{this.state.labels.length > 0\n\t\t\t\t\t\t\t\t\t\t\t? <DropdownButton title=\"Pieces\" onSelect={this.updateMetadata}>\n\t\t\t\t\t\t\t\t\t\t\t\t{this.state.labels.map((label, index) =>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Dropdown.Item eventKey={label.name}>{label.name}</Dropdown.Item>\n\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t</DropdownButton>\n\t\t\t\t\t\t\t\t\t\t\t: \"\"\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t</ButtonGroup>\n\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t\tCurrent Label: {this.state.metadata[this.state.metadata.length - 1].value}\n\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tthis.state.can_upload_pdf\n\t\t\t\t\t\t\t\t\t\t? <PDFDisplay file={this.state.pdf_url} piece={this.state.metadata[this.state.metadata.length - 1].value} api={this.props.api} />\n\t\t\t\t\t\t\t\t\t\t: \"\"\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t: <Button variant=\"success\" onClick={this.startRecord}>Record</Button>\n\t\t\t\t\t\t} </p>\n\t\t\t\t\t\t: <>\n\t\t\t\t\t\t\t<Alert key='0' variant='primary'>\n\t\t\t\t\t\t\t\t<p>No compatible MIDI devices found</p>\n\t\t\t\t\t\t\t\t<p>Connect your MIDI controller, use Chrome and refresh!</p>\n\t\t\t\t\t\tThis doesn't work on an iPad so please use a computer or Android device\n\t\t\t\t\t\t</Alert>\n\t\t\t\t\t\t\t<Button variant=\"primary\" onClick={this.registerMidiDevices}>\n\t\t\t\t\t\t\t\t<FontAwesomeIcon icon={faRedo} />\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t</>\n\t\t\t\t\t}\n\t\t\t\t</Card>\n\t\t\t</span >\n\t\t);\n\t}\n\n\tnewMidiTrack() {\n\t\treturn {\n\t\t\t\"division\": 480,\n\t\t\t\"format\": 1,\n\t\t\t\"tracks\": [\n\t\t\t\t[{\n\t\t\t\t\t\"delta\": 0,\n\t\t\t\t\t\"trackName\": \"scale\"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\"delta\": 0,\n\t\t\t\t\t\"setTempo\": {\n\t\t\t\t\t\t\"microsecondsPerQuarter\": 500000\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\"delta\": 0,\n\t\t\t\t\t\"timeSignature\": {\n\t\t\t\t\t\t\"denominator\": 4,\n\t\t\t\t\t\t\"metronome\": 24,\n\t\t\t\t\t\t\"numerator\": 4,\n\t\t\t\t\t\t\"thirtyseconds\": 8\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\"delta\": 0,\n\t\t\t\t\t\"endOfTrack\": true\n\t\t\t\t}]\n\t\t\t]\n\t\t}\n\t}\n}\n","import React from 'react';\n\nimport NoSleep from '../lib/nosleep'\n\nexport default class Player extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\ttitle: \"\",\n\t\t\tstatus: \"\",\n\t\t\tnoSleep: new NoSleep()\n\t\t}\n\t\tthis.midiPlayerRef = React.createRef()\n\t}\n\n\tmidiPlayerAutoplayOnSourceChange = () => {\n\t\tconst m = this.midiPlayerRef.current\n\t\tm.addEventListener('load', () => {\n\t\t\tif (m.playing === false) {\n\t\t\t\tm.start();\n\t\t\t}\n\t\t\tthis.setState((prevState, props) => ({\n\t\t\t\tstatus: this.getLabel(this.props.playingItem)\n\t\t\t}));\n\t\t})\n\t\tm.addEventListener('start', () => {\n\t\t\tthis.state.noSleep.enable()\n\t\t})\n\t\tm.addEventListener('stop', () => {\n\t\t\tthis.state.noSleep.disable()\n\t\t})\n\n\t}\n\n\tcomponentDidMount() {\n\t\tthis.midiPlayerAutoplayOnSourceChange()\n\n\t}\n\n\tcomponentDidUpdate() {\n\t\tconst m = this.midiPlayerRef.current\n\t\tif (this.props.playingItem !== null && m.src !== this.props.playingItem.url) {\n\t\t\tconst m = this.midiPlayerRef.current\n\t\t\tm.src = this.props.playingItem.url\n\t\t\tconsole.log(this.getLabel(this.props.playingItem))\n\t\t\tthis.setState({ status: \"Loading...\" })\n\t\t}\n\t}\n\n\tgetLabel(item) {\n\t\tif (item.label !== null) {\n\t\t\treturn item.label.name\n\t\t} else if (item.sight_reading === true) {\n\t\t\treturn \"Sight Reading\"\n\t\t} else if (item.technical === true) {\n\t\t\treturn \"Technical\"\n\t\t}\n\t\treturn \"\"\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<span>\n\t\t\t\t<midi-player id=\"midi-player\" sound-font=\"https://storage.googleapis.com/magentadata/js/soundfonts/sgm_plus\" ref={this.midiPlayerRef} />\n\t\t\t\t<span className=\"status\" centered>{this.state.status}</span>\n\t\t\t</span>\n\t\t);\n\t}\n}\n","import { Card, Dropdown } from 'react-bootstrap';\nimport { XAxis, YAxis, Legend, CartesianGrid, BarChart, Bar, Tooltip, ResponsiveContainer } from 'recharts';\nimport React from 'react';\nimport prettyDate from 'pretty-date-js';\n\nimport * as TimeFormatUtils from '../utils/TimeFormatUtils'\n\nexport default class Stats extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props)\n\t\tthis.state = { stats: null }\n\t}\n\n\tcomponentDidMount() {\n\t\tthis.props.api.stats().then((res) => {\n\t\t\tconsole.log(res)\n\t\t\tthis.setState({\n\t\t\t\tdata: res.response,\n\t\t\t\tkey: 'all',\n\t\t\t\tstats: res.response.all\n\t\t\t})\n\t\t})\n\t}\n\n\tformat(value, name, props) {\n\t\treturn TimeFormatUtils.formatDuration(value)\n\t}\n\n\tchangeTimeframe = (eventKey, eventObject) => {\n\t\tconst data = this.state.data\n\t\tthis.setState({\n\t\t\tkey: eventKey,\n\t\t\tstats: data[eventKey]\n\t\t})\n\t}\n\n\tdatePrettify = (date) => {\n\t\tconst obj = prettyDate(date)\n\t\treturn `${obj.value} ${obj.lang} ${obj.misc}`\n\t}\n\n\trender() {\n\t\tlet data = []\n\t\tlet last_played = []\n\n\t\tif (this.state.stats) {\n\t\t\tfor (const item of this.state.stats.labels) {\n\t\t\t\tdata.push({\n\t\t\t\t\tname: item.label,\n\t\t\t\t\tvalue: item.duration\n\t\t\t\t})\n\t\t\t}\n\t\t\tlast_played = this.state.data.last_played\n\t\t}\n\t\tdata.sort((a, b) => b.value - a.value)\n\t\tlast_played.sort((a, b) => b.date > a.date)\n\t\tconsole.log(last_played)\n\t\treturn (\n\t\t\t<React.Fragment>\n\t\t\t\t{this.state.stats\n\t\t\t\t\t? <React.Fragment>\n\t\t\t\t\t\t<Card>\n\t\t\t\t\t\t\t<p>{`Total time practiced: ${TimeFormatUtils.formatDuration(this.state.data.all.duration)}`}</p>\n\t\t\t\t\t\t\t<p>{`Last 24h: ${TimeFormatUtils.formatDuration(this.state.data.day.duration)}`}</p>\n\t\t\t\t\t\t\t<p>{`Last week: ${TimeFormatUtils.formatDuration(this.state.data.week.duration)}`}</p>\n\t\t\t\t\t\t\t<p>{`Last month: ${TimeFormatUtils.formatDuration(this.state.data.month.duration)}`}</p>\n\t\t\t\t\t\t</Card>\n\t\t\t\t\t\t<Card>\n\t\t\t\t\t\t\t<Dropdown onSelect={this.changeTimeframe}>\n\t\t\t\t\t\t\t\t<Dropdown.Toggle variant=\"info\" id=\"dropdown-basic\">\n\t\t\t\t\t\t\t\t\t{this.state.key}\n\t\t\t\t\t\t\t\t</Dropdown.Toggle>\n\t\t\t\t\t\t\t\t<Dropdown.Menu>\n\t\t\t\t\t\t\t\t\t<Dropdown.Item eventKey=\"all\">All</Dropdown.Item>\n\t\t\t\t\t\t\t\t\t<Dropdown.Item eventKey=\"day\">Last 24h</Dropdown.Item>\n\t\t\t\t\t\t\t\t\t<Dropdown.Item eventKey=\"week\">Last week</Dropdown.Item>\n\t\t\t\t\t\t\t\t\t<Dropdown.Item eventKey=\"month\">Last month</Dropdown.Item>\n\t\t\t\t\t\t\t\t</Dropdown.Menu>\n\t\t\t\t\t\t\t</Dropdown>\n\t\t\t\t\t\t\t<ResponsiveContainer height={400}>\n\t\t\t\t\t\t\t\t<BarChart data={data} barCategoryGap={1} barSize={30} >\n\t\t\t\t\t\t\t\t\t<CartesianGrid strokeDasharray=\"3 3\" />\n\t\t\t\t\t\t\t\t\t<XAxis dataKey=\"name\" />\n\t\t\t\t\t\t\t\t\t<YAxis tickFormatter={this.format} />\n\t\t\t\t\t\t\t\t\t<Legend />\n\t\t\t\t\t\t\t\t\t<Tooltip formatter={this.format} />\n\t\t\t\t\t\t\t\t\t<Bar dataKey=\"value\" fill=\"#8884d8\" />\n\t\t\t\t\t\t\t\t</BarChart>\n\t\t\t\t\t\t\t</ResponsiveContainer>\n\t\t\t\t\t\t</Card>\n\t\t\t\t\t\t<Card>\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tlast_played.map((item, index) => {\n\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t<p>{item.name} - {this.datePrettify(item.date)}</p>\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t</Card>\n\t\t\t\t\t</React.Fragment>\n\t\t\t\t\t: \"Loading...\"\n\t\t\t\t}\n\t\t\t</React.Fragment>\n\t\t);\n\t}\n}","/**\n * @file unmute.ts\n * @author Spencer Evans evans.spencer@gmail.com\n * unmute is a disgusting hack that helps..\n * \t1) automatically resume web audio contexts on user interaction\n * \t2) ios only: web audio play on the media channel rather than the ringer channel\n * \t3) ios only: disable the media playback widget and airplay.\n * \t4) automatically pause and resume web audio when the page is hidden.\n * Auto resuming works by checking context state and calling resume during any resumable event.\n * Media channel playback and media widget disabling work by playing an airplay-disabled silent html audio track in the background.\n * Automatic pausing when the page is hidden is supported by both the page visibility api AND blur events because ios has a poor implementation of the page visibility api.\n * This is all really gross and apple should really fix their janky browser.\n * This code isn't optimized in any fashion, it is just whipped up to help someone out on stack overflow, its just meant as an example.\n */\n/**\n * Enables unmute.\n * @param context A reference to the web audio context to \"unmute\".\n */\nexport default function unmute(context) {\n    var pageVisibilityAPI;\n    if (document.hidden !== undefined)\n        pageVisibilityAPI = { hidden: \"hidden\", visibilitychange: \"visibilitychange\" };\n    else if (document.webkitHidden !== undefined)\n        pageVisibilityAPI = { hidden: \"webkitHidden\", visibilitychange: \"webkitvisibilitychange\" };\n    else if (document.mozHidden !== undefined)\n        pageVisibilityAPI = { hidden: \"mozHidden\", visibilitychange: \"mozvisibilitychange\" };\n    else if (document.msHidden !== undefined)\n        pageVisibilityAPI = { hidden: \"msHidden\", visibilitychange: \"msvisibilitychange\" };\n    // Determine if ios\n    var ua = navigator.userAgent.toLowerCase();\n    // eslint-disable-next-line\n    var isIOS = (ua.indexOf(\"iphone\") >= 0 && ua.indexOf(\"like iphone\") < 0 || ua.indexOf(\"ipad\") >= 0 && ua.indexOf(\"like ipad\") < 0 || ua.indexOf(\"ipod\") >= 0 && ua.indexOf(\"like ipod\") < 0);\n    // Track page state\n    var isPageActive = true;\n    var isPageVisible = true;\n    var iosIsPageFocused = true; // iOS has a buggy page visibility API, luckily it dispatches blur and focus events on the window when vis change events should fire.\n    // Track desired audio state\n    var suspendAudio = false;\n    var audioUnlockingEvents = [\"click\", \"contextmenu\", \"auxclick\", \"dblclick\", \"mousedown\", \"mouseup\", \"touchend\", \"keydown\", \"keyup\"];\n    // Track web audio state\n    var contextUnlockingEnabled = false;\n    // Track html audio state\n    var tag;\n    var tagUnlockingEnabled = false;\n    var tagPendingChange = false;\n    function contextStateCheck(tryResuming) {\n        if (context.state === \"running\") {\n            // No need to watch for unlocking events while running\n            toggleContextUnlocking(false);\n            // Check if our state matches\n            if (suspendAudio) {\n                // We want to be suspended, we can suspend at any time\n                context.suspend().then(context_promiseHandler, context_promiseHandler);\n            }\n        }\n        else if (context.state !== \"closed\") {\n            // Interrupted or suspended, check if our state matches\n            if (!suspendAudio) {\n                // We want to be running\n                toggleContextUnlocking(true);\n                if (tryResuming)\n                    context.resume().then(context_promiseHandler, context_promiseHandler);\n            }\n            else {\n                // We don't want to be running, so no need to watch for unlocking events\n                toggleContextUnlocking(false);\n            }\n        }\n    }\n    function toggleContextUnlocking(enable) {\n        if (contextUnlockingEnabled === enable)\n            return;\n        contextUnlockingEnabled = enable;\n        for (var _i = 0, audioUnlockingEvents_1 = audioUnlockingEvents; _i < audioUnlockingEvents_1.length; _i++) {\n            var evt = audioUnlockingEvents_1[_i];\n            if (enable)\n                window.addEventListener(evt, context_unlockingEvent, { capture: true, passive: true });\n            else\n                window.removeEventListener(evt, context_unlockingEvent, { capture: true, passive: true });\n        }\n    }\n    function context_statechange() {\n        contextStateCheck(true);\n    }\n    function context_promiseHandler() {\n        contextStateCheck(false);\n    }\n    function context_unlockingEvent() {\n        contextStateCheck(true);\n    }\n    function tagStateCheck(tryChange) {\n        // We have a pending state change, let that resolve first\n        if (tagPendingChange)\n            return;\n        if (!tag.paused) {\n            // No need to watch for unlocking events while running\n            toggleTagUnlocking(false);\n            // Check if our state matches\n            if (suspendAudio) {\n                // We want to be suspended, we can suspend at any time\n                tag.pause(); // instant action, so no need to set as pending\n            }\n        }\n        else {\n            // Tag isn't playing, check if our state matches\n            if (!suspendAudio) {\n                // We want to be running\n                if (tryChange) {\n                    // Try forcing a change, so stop watching for unlocking events while attempt is in progress\n                    toggleTagUnlocking(false);\n                    // Attempt to play\n                    tagPendingChange = true;\n                    var p = void 0;\n                    try {\n                        p = tag.play();\n                        if (p)\n                            p.then(tag_promiseHandler, tag_promiseHandler);\n                        else {\n                            tag.addEventListener(\"playing\", tag_promiseHandler);\n                            tag.addEventListener(\"abort\", tag_promiseHandler);\n                            tag.addEventListener(\"error\", tag_promiseHandler);\n                        }\n                    }\n                    catch (err) {\n                        tag_promiseHandler();\n                    }\n                }\n                else {\n                    // We're not going to try resuming this time, but make sure unlocking events are enabled\n                    toggleTagUnlocking(true);\n                }\n            }\n            else {\n                // We don't want to be running, so no need to watch for unlocking events\n                toggleTagUnlocking(false);\n            }\n        }\n    }\n    function toggleTagUnlocking(enable) {\n        if (tagUnlockingEnabled === enable)\n            return;\n        tagUnlockingEnabled = enable;\n        for (var _i = 0, audioUnlockingEvents_2 = audioUnlockingEvents; _i < audioUnlockingEvents_2.length; _i++) {\n            var evt = audioUnlockingEvents_2[_i];\n            if (enable)\n                window.addEventListener(evt, tag_unlockingEvent, { capture: true, passive: true });\n            else\n                window.removeEventListener(evt, tag_unlockingEvent, { capture: true, passive: true });\n        }\n    }\n    function tag_promiseHandler() {\n        tag.removeEventListener(\"playing\", tag_promiseHandler);\n        tag.removeEventListener(\"abort\", tag_promiseHandler);\n        tag.removeEventListener(\"error\", tag_promiseHandler);\n        // Tag started playing, so we're not suspended\n        tagPendingChange = false;\n        tagStateCheck(false);\n    }\n    function tag_unlockingEvent() {\n        tagStateCheck(true);\n    }\n    /**\n     * Called when the page becomes active.\n     */\n    function pageActivated() {\n        suspendAudio = false;\n        if (tag)\n            tagStateCheck(true); // tag first to ensure media channel start first\n        contextStateCheck(true);\n    }\n    /**\n     * Called when the page becomes inactive.\n     */\n    function pageDeactivated() {\n        suspendAudio = true;\n        contextStateCheck(true); // context first to be sure it stops before the tag\n        if (tag)\n            tagStateCheck(true);\n    }\n    /**\n     * Updates page active state.\n     */\n    function pageStateCheck() {\n        if (isPageVisible && iosIsPageFocused) {\n            if (!isPageActive) {\n                isPageActive = true;\n                pageActivated();\n            }\n        }\n        else {\n            if (isPageActive) {\n                isPageActive = false;\n                pageDeactivated();\n            }\n        }\n    }\n    /**\n     * Handle visibility api events.\n     */\n    function doc_visChange() {\n        if (pageVisibilityAPI) {\n            if (document[pageVisibilityAPI.hidden] === isPageActive) {\n                isPageVisible = !document[pageVisibilityAPI.hidden];\n                pageStateCheck();\n            }\n        }\n    }\n    /**\n     * Handles blur events (ios only).\n     */\n    function win_focusChange(evt) {\n        if (evt && evt.target !== window)\n            return;\n        if (document.hasFocus()) {\n            if (iosIsPageFocused)\n                return;\n            iosIsPageFocused = true;\n            pageStateCheck();\n        }\n        else {\n            if (!iosIsPageFocused)\n                return;\n            iosIsPageFocused = false;\n            pageStateCheck();\n        }\n    }\n    /**\n     * A utility function for decompressing the base64 silence string.\n     * @param c The number of times the string is repeated in the string segment.\n     * @param a The string to repeat.\n     */\n    function poorManHuffman(c, a) { var e; for (e = a; c > 1; c--)\n        e += a; return e; }\n    // Watch for tag state changes and check initial state\n    if (isIOS) {\n        // Is ios, we need to play an html track in the background and disable the widget\n        // NOTE: media widget / airplay MUST be disabled with this super gross hack to create the audio tag, setting the attribute in js doesn't work\n        var tmp = document.createElement(\"div\");\n        tmp.innerHTML = \"<audio x-webkit-airplay='deny'></audio>\";\n        tag = tmp.children.item(0);\n        tag.controls = false;\n        tag.disableRemotePlayback = true; // Airplay like controls on other devices, prevents casting of the tag\n        tag.preload = \"auto\";\n        // Set the src to a short bit of url encoded as a silent mp3\n        // NOTE The silence MP3 must be high quality, when web audio sounds are played in parallel the web audio sound is mixed to match the bitrate of the html sound\n        // 0.01 seconds of silence VBR220-260 Joint Stereo 859B\n        //tag.src = \"data:audio/mpeg;base64,//uQxAAAAAAAAAAAAAAAAAAAAAAAWGluZwAAAA8AAAACAAACcQCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA//////////////////////////////////////////////////////////////////8AAABhTEFNRTMuMTAwA8MAAAAAAAAAABQgJAUHQQAB9AAAAnGMHkkIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA//sQxAADgnABGiAAQBCqgCRMAAgEAH///////////////7+n/9FTuQsQH//////2NG0jWUGlio5gLQTOtIoeR2WX////X4s9Atb/JRVCbBUpeRUq//////////////////9RUi0f2jn/+xDECgPCjAEQAABN4AAANIAAAAQVTEFNRTMuMTAwVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVQ==\";\n        // The str below is a \"compressed\" version using poor mans huffman encoding, saves about 0.5kb\n        tag.src = \"data:audio/mpeg;base64,//uQx\" + poorManHuffman(23, \"A\") + \"WGluZwAAAA8AAAACAAACcQCA\" + poorManHuffman(16, \"gICA\") + poorManHuffman(66, \"/\") + \"8AAABhTEFNRTMuMTAwA8MAAAAAAAAAABQgJAUHQQAB9AAAAnGMHkkI\" + poorManHuffman(320, \"A\") + \"//sQxAADgnABGiAAQBCqgCRMAAgEAH\" + poorManHuffman(15, \"/\") + \"7+n/9FTuQsQH//////2NG0jWUGlio5gLQTOtIoeR2WX////X4s9Atb/JRVCbBUpeRUq\" + poorManHuffman(18, \"/\") + \"9RUi0f2jn/+xDECgPCjAEQAABN4AAANIAAAAQVTEFNRTMuMTAw\" + poorManHuffman(97, \"V\") + \"Q==\";\n        tag.loop = true;\n        tag.load();\n        // Try to play right off the bat\n        tagStateCheck(true);\n    }\n    // Watch for context state changes and check initial state\n    context.onstatechange = context_statechange; // NOTE: the onstatechange callback property is more widely supported than the statechange event\tcontext.addEventListener(\"statechange\", context_statechange);\n    contextStateCheck(false);\n    // Watch for page state changes and check initial page state\n    if (pageVisibilityAPI)\n        document.addEventListener(pageVisibilityAPI.visibilitychange, doc_visChange, true);\n    if (isIOS) {\n        // Watch for blur / focus events on ios because it doesn't dispatch vis change events properly\n        window.addEventListener(\"focus\", win_focusChange, true);\n        window.addEventListener(\"blur\", win_focusChange, true);\n    }\n    doc_visChange();\n    win_focusChange();\n}\n","import { Container, Collapse, Navbar, Nav } from 'react-bootstrap';\nimport { withRouter } from 'react-router-dom'\nimport React, { Component } from 'react';\n\nimport LoginContainer from './components/LoginContainer';\n\nimport './App.css';\n\nimport {\n  HashRouter as Router,\n  Switch,\n  Route\n} from \"react-router-dom\";\n\nimport MusicLog from './components/MusicLog';\nimport Menubar from './components/Menubar';\nimport APIService from './services/APIService';\nimport Recorder from './components/Recorder'\nimport Player from './components/Player'\nimport Stats from './components/Stats'\nimport unmute from './lib/unmute'\nimport SignupForm from './components/SignupForm';\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      displayed_form: '',\n      logged_in: localStorage.getItem('token') ? true : false,\n      username: '',\n      api: new APIService(),\n      playingItem: null,\n      status: \"\",\n    };\n\n    this.onPlay = this.onPlay.bind(this);\n  }\n\n  componentDidMount() {\n\n    const scripts_srcs = [\n      \"https://cdn.jsdelivr.net/combine/npm/tone@14.7.58,gh/e7mac/js-dist@1.0.0/core.js,npm/focus-visible@5,gh/e7mac/js-dist@1.0.0/midi-player.min.js\",\n    ]\n\n    for (const scripts_src of scripts_srcs) {\n      const script = document.createElement(\"script\");\n      script.src = scripts_src;\n      script.async = true;\n      document.body.appendChild(script);\n    }\n\n    document.title = \"Daily Clef\"\n\n    let context = (window.AudioContext || window.webkitAudioContext) ?\n      new (window.AudioContext || window.webkitAudioContext)() : null;\n    // Pass it to unmute if the context exists... ie WebAudio is supported\n    if (context) unmute(context);\n  }\n\n  onPlay = (item) => {\n    this.setState({\n      playingItem: item\n    })\n  }\n\n  onRelabel = (clip_id, label_name) => {\n    console.log(clip_id, label_name)\n  }\n\n  setStatus = (status) => {\n    this.setState({\n      status: status\n    })\n  }\n\n  render() {\n    return (\n      <Router>\n        <div className=\"App\">\n          <Menubar api={this.state.api} />\n          <Container className=\"container-infinite-scroll\">\n            {this.state.logged_in || this.state.api.demo\n              ? <Switch>\n                <Route path=\"/record\">\n                  <Recorder api={this.state.api} />\n                </Route>\n                <Route path=\"/stats\">\n                  <Stats api={this.state.api} />\n                </Route>\n                <Route path=\"/\">\n                  <React.Fragment>\n                    <MusicLog onPlay={this.onPlay} api={this.state.api} playingItem={this.state.playingItem} />\n                  </React.Fragment>\n                </Route>\n              </Switch>\n              : <Switch>\n                <Route path=\"/signup\">\n                  <SignupForm api={this.state.api} />\n                </Route>\n                <Route path=\"/\">\n                  <LoginContainer api={this.state.api} />\n                </Route>\n              </Switch>\n            }\n          </Container>\n          <Collapse in={this.state.playingItem}>\n            <Navbar bg=\"dark\" className=\"panel-body\" fixed=\"bottom\">\n              <Navbar.Toggle aria-controls=\"basic-navbar-nav\" />\n              <Navbar.Collapse id=\"basic-navbar-nav\">\n                <Nav className=\"mr-auto\">\n                  <Player playingItem={this.state.playingItem} />\n                </Nav>\n              </Navbar.Collapse>\n            </Navbar>\n          </Collapse>\n        </div>\n      </Router >\n    );\n  }\n}\n\nexport default withRouter(App);","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport { HashRouter } from 'react-router-dom';\n\nReactDOM.render(\n  <HashRouter>\n    <React.StrictMode>\n      <App />\n    </React.StrictMode>\n  </HashRouter>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}